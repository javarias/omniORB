<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.6 [en] (WinNT; I) [Netscape]">
   <title>Readme for the Bank example</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000FF" vlink="#990066" alink="#FF0000">

<h2>
Bank Naming for Java</h2>

<hr WIDTH="100%">
<ul>
<li>
<a href="Bank.idl">Bank.idl</a></li>

<br>IDL interface for the <b>Bank</b>.
<li>
<a href="Server.java">Server.java</a></li>

<br>Bank server. Creates a POA named MyPOA, creates an instance of the
<b>AccountManager</b>
servant and activates that servant on the MyPOA. Then associates a <b>name</b>
with the AccountManager IOR in the root
<br>context of the Naming Service. It then starts waiting for client requests.
<li>
<a href="AccountImpl.java">AccountImpl.java</a></li>

<br>Account servant implementation. Implements the balance() method.
<li>
<a href="AccountManagerImpl.java">AccountManagerImpl.java</a></li>

<br>Account Manager servant Implementation. Implements open() method. Checks
in a table to see if there is already an <b>Account</b> for the specified
user. If not, creates an account with random balance. Returns the created
account.
<li>
<a href="Client.java">Client.java</a></li>

<br>This is the Bank client. Obtains the IOR of the <b>AccountManager</b>
by resolving with the <b>name</b> associated with it in the root context
of the Naming Service. Then&nbsp; invokes <tt>open()</tt> to open a bank
account. It then invokes <tt>balance()</tt> on the <b>Account</b> object
reference obtained to query the balance.
<li>
<a href="Makefile.java">Makefile.java</a> (vbmake.bat <i>on Windows</i>):
Used to build all the test targets.</li>
</ul>

<h3>
Building this example</h3>
Typing <b>make</b> -f Makefile.java (or <b>vbmake</b> <i>on Windows</i>)
in the bank_naming subdirectory will cause the <a href="Bank.idl">Bank.idl</a>
to be run through the idl2java compiler. It will also build the following
classes for the examples described above:
<ul>
<li>
Server.class</li>

<li>
Client.class</li>
</ul>

<h3>
Running this example</h3>
For Beta 1, to run the examples, first make sure that the VisiBroker Smart
Agent (osagent executable) is running on your network. The Naming Service
also needs to be activated. It can be done with the following command:
<p><tt><b>&nbsp;&nbsp;&nbsp; prompt></b> nameserv &lt;name>&nbsp; &amp;</tt>
<p><tt>&nbsp;&nbsp;&nbsp; (start nameserv &lt;name> <i>on Windows</i>)</tt>
<p>This will startup the NamingServer with the default backing store which
is InMemory. If the &lt;name> argument is not supplied, a default name
"NameService" will be assigned to the Naming Server. You can override the
default properties using your own property file, if you wish to use other
types of backing stores(eg Databases). Details of how you can define this
property file can be found in the BackingStoreSetup.html file in this example
directory. The Naming Service can be started up using this property file
as follows:
<p><tt><b>&nbsp;&nbsp;&nbsp; prompt></b> nameserv </tt>-config &lt;property_file_name>&nbsp;
&lt;name><tt> &amp;</tt>
<p><tt>&nbsp;&nbsp;&nbsp; (start nameserv </tt>-config &lt;property_file_name>
&lt;name>&nbsp; <i>o<tt>n Windows</tt></i><tt>)</tt>
<br>&nbsp;
<p>Then start the bank server using the command:
<ul>
<pre><tt><b>prompt></b> vbj -DSVCnameroot=&lt;name> Server&nbsp; &amp;&nbsp;

(start vbj -DSVCnameroot=&lt;name> Server <i>on Windows</i>)

<i>// make the server run in the background</i></tt></pre>
</ul>
<i>Next, open a user's bank account and query the balance in the account
using the command</i>
<ul>
<pre><i><tt><b>prompt></b> vbj -DSVCnameroot=&lt;name></tt></i><tt> <i>Client john</i></tt></pre>
</ul>
<i>or</i>
<ul>
<pre><i><tt><b>prompt></b> vbj -DSVCnameroot=&lt;name></tt></i><tt> <i>Client&nbsp;&nbsp;&nbsp;

// uses a default name</i></tt></pre>
</ul>

<hr WIDTH="100%">
<br><i>Return to the <a href="README.html">top-level examples page</a>.</i>
</body>
</html>
