Thu Aug 10 12:04:07 BST 2000 sll
================================

- fixed a typo in the shared library export rule

external_merge/mk/unix.mk
external_merge/mk/platforms/powerpc_aix_4.2.mk
external_merge/mk/platforms/powerpc_aix_4.2_egcs.mk
external_merge/mk/platforms/powerpc_aix_4.2_xlc5.mk
external_merge/mk/platforms/powerpc_aix_4.3_xlc5.mk


Thu Aug 10 11:41:31 BST 2000 sll
================================

- Added pragma hh to COS IDLs so that COS_sysdep.h is included
  by the stub headers. This is necessary so that the right
  CPP macros can be inserted to instruct the compiler to use the
  DLL version of the COS stub library on win32 platforms.

src/services/idl/AttNotifyChannelAdmin.idl
src/services/idl/CosCollection.idl
src/services/idl/CosCompoundLifeCycle.idl
src/services/idl/CosConcurrencyControl.idl
src/services/idl/CosContainment.idl
src/services/idl/CosEventChannelAdmin.idl
src/services/idl/CosEventComm.idl
src/services/idl/CosExternalization.idl
src/services/idl/CosExternalizationContainment.idl
src/services/idl/CosExternalizationReference.idl
src/services/idl/CosGraphs.idl
src/services/idl/CosLicensingManager.idl
src/services/idl/CosLifeCycle.idl
src/services/idl/CosLifeCycleContainment.idl
src/services/idl/CosLifeCycleReference.idl
src/services/idl/CosNaming.idl
src/services/idl/CosNotification.idl
src/services/idl/CosNotifyChannelAdmin.idl
src/services/idl/CosNotifyComm.idl
src/services/idl/CosNotifyFilter.idl
src/services/idl/CosObjectIdentity.idl
src/services/idl/CosPersistenceDDO.idl
src/services/idl/CosPersistenceDS_CLI.idl
src/services/idl/CosPersistencePDS.idl
src/services/idl/CosPersistencePDS_DA.idl
src/services/idl/CosPersistencePID.idl
src/services/idl/CosPersistencePO.idl
src/services/idl/CosPersistencePOM.idl
src/services/idl/CosPropertyService.idl
src/services/idl/CosQuery.idl
src/services/idl/CosQueryCollection.idl
src/services/idl/CosReference.idl
src/services/idl/CosRelationships.idl
src/services/idl/CosStream.idl
src/services/idl/CosTSPortability.idl
src/services/idl/CosTime.idl
src/services/idl/CosTimerEvent.idl
src/services/idl/CosTrading.idl
src/services/idl/CosTradingDynamic.idl
src/services/idl/CosTradingRepos.idl
src/services/idl/CosTransactions.idl
src/services/idl/CosTypedEventChannelAdmin.idl
src/services/idl/CosTypedEventComm.idl
src/services/idl/CosTypedNotifyChannelAdmin.idl
src/services/idl/CosTypedNotifyComm.idl
src/services/idl/DCE_CIOPSecurity.idl
src/services/idl/LifeCycleService.idl
src/services/idl/Lname-library.idl
src/services/idl/NRService.idl
src/services/idl/RDITestTypes.idl
src/services/idl/SECIOP.idl
src/services/idl/SSLIOP.idl
src/services/idl/Security.idl
src/services/idl/SecurityAdmin.idl
src/services/idl/SecurityLevel1.idl
src/services/idl/SecurityLevel2.idl
src/services/idl/SecurityReplaceable.idl
src/services/idl/TimeBase.idl
src/services/mklib/COS_sysdep.h                    NEW
src/services/mklib/dir.mk
src/services/mklib/libdefs.mk
src/services/mklib/mkBOAlib/COS_sysdep.h           NEW
src/services/mklib/mkBOAlib/dir.mk

Thu Aug 10 11:29:11 BST 2000 djs (ci by sll)
============================================

- Support new pragma hh in the cxx omniidl backend.
e.g.

//IDL                                       // C++ stub header
#pragma hh #ifndef __SITEDEF_H__	    #ifndef __SITEDEF_H__
#pragma hh #define __SITEDEF_H__	    #define __SITEDEF_H__
#pragma hh #include "sitedef.h"     -->     #include "sitedef.h"
#pragma hh #endif			    #endif

The pragmas are recognised only at the beginning of the IDL file (minus
comments). They are ignored if they appeared in the included IDL files or
other parts of the IDL file.

- Added CPP macro guards to stub header to preserve the value of
  USE_core_stub_in_nt_dll and USE_dyn_stub_in_nt_dll. This is useful
  when stub headers include others which may have been compiled into DLLs.

src/lib/omniORB2/omniidl_be/cxx/header/__init__.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py


Thu Aug 10 11:14:19 BST 2000 sll
================================

- Found the workaround for MSVC++ so that exceptions can be caught by base
  class. All the copy ctor from the most derived to the base classes must be
  public. Previously it was protected.
  CORBA exceptions can now be caught by base class on win32 platforms.

include/omniORB3/CORBA.h
include/omniORB3/CORBA_sysdep.h

Thu Aug 10 11:03:13 BST 2000 sll
================================

- For those platforms which cannot be unblocked from a recv() by a shutdown(),
  now do poll() or select() for both incoming and outgoing strands.
  This is necessary especialy for win32 or else the server side socket will not
  shutdown until the client side close the socket. This wasn't done previously
  as it was thought that shutdown() does have an effect on recv() if this is
  a passive socket. This turns out to be wrong.

src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc

Thu Aug 10 10:07:42 BST 2000 sll
================================

- Added missing script for ODE

bin/scripts/install.sh

Wed Aug  9 16:35:37 BST 2000 sll
================================

- Make rules overhaul (part II).

external_merge/mk/platforms/alpha_linux_2.0.mk
external_merge/mk/platforms/alpha_osf1_3.2.mk
external_merge/mk/platforms/alpha_osf1_4.0.mk
external_merge/mk/platforms/hppa_hpux_10.20.mk
external_merge/mk/platforms/i586_linux_2.0.mk
external_merge/mk/platforms/i586_linux_2.0_glibc.mk
external_merge/mk/platforms/m68k_nextstep_3.3.mk
external_merge/mk/platforms/mips_irix_6.2_n32.mk
external_merge/mk/platforms/mips_sinux_5.43.mk
external_merge/mk/platforms/powerpc_aix_4.2.mk
external_merge/mk/platforms/powerpc_aix_4.2_egcs.mk
external_merge/mk/platforms/powerpc_aix_4.2_xlc5.mk
external_merge/mk/platforms/powerpc_aix_4.3_xlc5.mk
external_merge/mk/platforms/sun4_sosV_5.6.mk
external_merge/mk/platforms/sun4_sosV_5.7.mk
external_merge/mk/platforms/x86_freebsd_3.2.mk
external_merge/mk/platforms/x86_freebsd_4.0.mk
external_merge/mk/platforms/x86_nextstep_3.3.mk
external_merge/mk/platforms/x86_osr5.mk
external_merge/mk/platforms/x86_sosV_5.5.mk
external_merge/mk/platforms/x86_win95.mk

mk/platforms/alpha_linux_2.0.mk
mk/platforms/alpha_nt_4.0.mk
mk/platforms/i586_linux_2.0.mk
mk/platforms/i586_linux_2.0_glibc.mk
mk/platforms/mips_irix_6.2_n32.mk
mk/platforms/mips_irix_6.4_64.mk
mk/platforms/mips_irix_6.4_n32.mk
mk/platforms/mips_irix_6.5_64.mk
mk/platforms/sun4_sosV_5.6.mk
mk/platforms/sun4_sosV_5.7.mk
mk/platforms/x86_nt_3.5.mk
mk/platforms/x86_win95.mk

Wed Aug  9 16:15:40 BST 2000 sll
================================

- Make rules overhaul. Remove the need to keep 2 copies of the same rules for
  ODE and the external distribution. The definitive version is in the external
  distribution (external_merge/mk). ODE specific customerisations are added on top
  in mk.


external_merge/config/config.mk
external_merge/mk/afterdir.mk
external_merge/mk/beforedir.mk
external_merge/mk/unix.mk
external_merge/mk/win32.mk
external_merge/mk/platforms/hppa_hpux_11.00.mk
external_merge/mk/platforms/i586_linux_2.0_glibc2.1.mk
external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk
external_merge/mk/platforms/sun4_sosV_5.5.mk
external_merge/src/services/mklib/mkBOAlib/sharedlib/GNUmakefile  REMOVED
external_merge/src/services/mklib/sharedlib/GNUmakefile           REMOVED

mk/afterdir.mk
mk/beforedir.mk
mk/unix.mk
mk/win32.mk
mk/platforms/hppa_hpux_11.00.mk
mk/platforms/i586_linux_2.0_glibc2.1.mk
mk/platforms/mips_irix_6.4_6.5_common.mk
mk/platforms/mips_irix_6.5_n32.mk
mk/platforms/sun4_sosV_5.5.mk
mk/platforms/x86_nt_4.0.mk

src/appl/omniMapper/dir.mk
src/appl/omniNames/dir.mk
src/appl/utils/catior/dir.mk
src/appl/utils/convertior/dir.mk
src/appl/utils/genior/dir.mk
src/appl/utils/nameclt/dir.mk
src/lib/omniORB2/dir.mk

src/services/dir.mk
src/services/mklib/dir.mk
src/services/mklib/mkBOAlib/dir.mk


Tue Aug  8 16:13:12 BST 2000 sll
================================

- On win32 platforms, if the server is not present, a CORBA call may block
  for 30 seconds before returning a COMM_FAILURE. This is because win32
  uses a different way to report the socket error in a select() call.

src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc


Tue Aug  8 15:55:35 BST 2000 dpg1
=================================

- -ORBpoa_iiop_port no longer overrides OMNIORB_USEHOSTNAME env var

src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/objectAdapter.cc
src/lib/omniORB2/orbcore/objectAdapter.h

- "lock" renamed "mu" to avoid name clash with iostream on some
  platforms.

src/examples/call_back/cb_server.cc


Mon Aug  7 18:07:29 BST 2000 dpg1
=================================

- Error messages if platform defines aren't made in cccp's config.h

src/tool/omniidl/cxx/cccp/config-freebsd.h
src/tool/omniidl/cxx/cccp/config-linux.h
src/tool/omniidl/cxx/cccp/config-solaris.h
src/tool/omniidl/cxx/cccp/config.h


Mon Aug  7 16:31:15 BST 2000 dpg1
=================================

- Partial back-port of long long from omni3_1_develop. Long longs
  inside Anys not supported because that would lead to binary
  incompatibility.

include/omniORB3/CORBA.h
include/omniORB3/CORBA_basetypes.h
include/omniORB3/CORBA_sysdep.h
include/omniORB3/Naming.hh
include/omniORB3/bufferedStream.h
include/omniORB3/omniORB.h
src/lib/omniORB2/omniidl_be/cxx/__init__.py
src/lib/omniORB2/omniidl_be/cxx/skutil.py
src/lib/omniORB2/omniidl_be/cxx/types.py
src/lib/omniORB2/omniidl_be/cxx/tyutil.py
src/lib/omniORB2/omniidl_be/cxx/util.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/typecode.py
src/lib/omniORB2/orbcore/logIOstream.cc
src/tool/omniidl/cxx/CORBA_basetypes.h
src/tool/omniidl/cxx/CORBA_sysdep.h
src/tool/omniidl/cxx/idl.ll
src/tool/omniidl/cxx/idlast.cc
src/tool/omniidl/cxx/idlexpr.cc
src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/cxx/idlutil.cc
src/tool/omniidl/cxx/idlutil.h
src/tool/omniidl/cxx/lex.yy.cc


Mon Aug  7 15:16:23 BST 2000 sll
================================

- Make shared library rules updates.
  Unified unix and win32 make rules. Now build shared, static and debug
  libraries in their own subdirectories. Use pattern rules to ensure the
  right compiler flags are passed to the compiler for each library.

mk/unix.mk
mk/win32.mk
mk/platforms/hppa_hpux_11.00.mk
mk/platforms/i586_linux_2.0_glibc.mk
mk/platforms/i586_linux_2.0_glibc2.1.mk
mk/platforms/mips_irix_6.2_n32.mk
mk/platforms/mips_irix_6.4_6.5_common.mk
mk/platforms/sun4_sosV_5.5.mk
mk/platforms/sun4_sosV_5.6.mk
mk/platforms/sun4_sosV_5.7.mk

src/services/mklib/dir.mk
src/services/mklib/mkBOAlib/dir.mk

src/services/mklib/sharedlib                      REMOVED
src/services/mklib/sharedlib/dir.mk               REMOVED
src/services/mklib/mkBOAlib/sharedlib             REMOVED
src/services/mklib/mkBOAlib/sharedlib/dir.mk      REMOVED


Mon Aug  7 11:28:55 BST 2000 sll
================================

- On win32 platforms, client side socket was left in non-blocking state
  after connect() succeeded. Bug is now fixed.

src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc

Fri Aug  4 16:23:29 BST 2000 dpg1
=================================

- ORB_init() now defaults ORB id to empty string, and accepts empty
  string as valid.

include/omniORB3/CORBA.h
src/lib/omniORB2/orbcore/corbaOrb.cc


Fri Aug  4 12:33:25 BST 2000 dpg1
=================================

- Updates for AIX with xlC

external_merge/mk/platforms/powerpc_aix_4.3_xlc5.mk
src/tool/omniidl/cxx/idlast.h


Fri Aug  4 10:00:42 BST 2000 dpg1
=================================

- Fix look-up of escaped identifiers broken on 19 July. (Bug 14.)

src/tool/omniidl/cxx/idlscope.cc


Thu Aug  3 22:22:24 BST 2000 djs
================================

- Fixed omniidl/C++ bug causing _objref_I operation signature mismatch
  (a typo in the -Wbvirtual_objref mode)

src/lib/omniORB2/omniidl_be/cxx/header/defs.py


Tue Aug  1 18:28:25 BST 2000 sll
================================

- Remove OSF1 platform files from internal mk/platforms as this is
  no longer used or maintained.

mk/platforms/alpha_osf1_3.2.mk              delete
mk/platforms/alpha_osf1_4.0.mk              delete
mk/platforms/alpha_osf1_4.0_oldcxx.mk       delete

Tue Aug  1 18:15:25 BST 2000 sll
================================

- Make shared library rules updates.
  Now a single set of rules in dir.mk applies to all unix platforms that
  can build shared libraries.

mk/unix.mk

mk/platforms/hppa_hpux_11.00.mk
mk/platforms/i586_linux_2.0_glibc.mk
mk/platforms/i586_linux_2.0_glibc2.1.mk
mk/platforms/mips_irix_6.4_6.5_common.mk
mk/platforms/sun4_sosV_5.5.mk
mk/platforms/sun4_sosV_5.6.mk
mk/platforms/sun4_sosV_5.7.mk
external_merge/mk/unix.mk
external_merge/mk/platforms/hppa_hpux_10.20.mk
external_merge/mk/platforms/hppa_hpux_11.00.mk
external_merge/mk/platforms/powerpc_aix_4.2.mk
external_merge/mk/platforms/powerpc_aix_4.2_egcs.mk
external_merge/mk/platforms/powerpc_aix_4.2_xlc5.mk
external_merge/mk/platforms/powerpc_aix_4.3_xlc5.mk
external_merge/mk/platforms/alpha_osf1_3.2.mk
external_merge/mk/platforms/alpha_osf1_4.0.mk
external_merge/mk/platforms/i586_linux_2.0_glibc.mk
external_merge/mk/platforms/i586_linux_2.0_glibc2.1.mk
external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk
external_merge/mk/platforms/sun4_sosV_5.5.mk
external_merge/mk/platforms/sun4_sosV_5.6.mk
external_merge/mk/platforms/sun4_sosV_5.7.mk
external_merge/mk/platforms/x86_freebsd_3.2.mk
external_merge/mk/platforms/x86_freebsd_4.0.mk
external_merge/mk/platforms/x86_sosV_5.5.mk

src/services/mklib/mkBOAlib/sharedlib/dir.mk
src/services/mklib/sharedlib/dir.mk


Tue Aug  1 12:21:35 BST 2000 dpg1
=================================

- Better comment handling for structs and unions

src/tool/omniidl/cxx/idl.yy
src/tool/omniidl/cxx/y.tab.cc


Tue Aug  1 10:38:56 BST 2000 dpg1
=================================

- IDL compiler no longer complains about inheriting an operation into
  an interface with the same name

src/tool/omniidl/cxx/idlscope.cc


Mon Jul 31 18:34:21 BST 2000 sll
================================

- Make shared library for COS idl stub libraries.
- name stub libraries with the same version number as the omniORB run time.
     e.g. for omniORB 3.0.0, the library name is libCOS3.a, libCOS3.so.0.0

external_merge/src/services/GNUmakefile                            NEW
external_merge/src/services/mklib/GNUmakefile                      NEW
external_merge/src/services/mklib/mkBOAlib/GNUmakefile             NEW
external_merge/src/services/mklib/mkBOAlib/sharedlib/GNUmakefile   NEW
external_merge/src/services/mklib/sharedlib/GNUmakefile

src/services/mklib/dir.mk
src/services/mklib/libdefs.mk
src/services/mklib/mkBOAlib/dir.mk
src/services/mklib/mkBOAlib/sharedlib/dir.mk                      NEW
src/services/mklib/sharedlib/dir.mk                               NEW


Mon Jul 31 18:27:49 BST 2000 sll
================================

- New make rules for making shared library:
     MakeCXXSharedLibrary
     ExportSharedLibrary

  For the moment, only used in services/mklib.

 external_merge/mk/platforms/alpha_osf1_3.2.mk
 external_merge/mk/platforms/alpha_osf1_4.0.mk
 external_merge/mk/platforms/hppa_hpux_10.20.mk
 external_merge/mk/platforms/hppa_hpux_11.00.mk
 external_merge/mk/platforms/i586_linux_2.0_glibc.mk
 external_merge/mk/platforms/i586_linux_2.0_glibc2.1.mk
 external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk
 external_merge/mk/platforms/powerpc_aix_4.2.mk
 external_merge/mk/platforms/powerpc_aix_4.2_egcs.mk
 external_merge/mk/platforms/powerpc_aix_4.2_xlc5.mk
 external_merge/mk/platforms/powerpc_aix_4.3_xlc5.mk
 external_merge/mk/platforms/sun4_sosV_5.5.mk
 external_merge/mk/platforms/sun4_sosV_5.6.mk
 external_merge/mk/platforms/sun4_sosV_5.7.mk
 external_merge/mk/platforms/x86_freebsd_3.2.mk
 external_merge/mk/platforms/x86_freebsd_4.0.mk
 external_merge/mk/platforms/x86_sosV_5.5.mk
 mk/platforms/hppa_hpux_11.00.mk
 mk/platforms/i586_linux_2.0_glibc.mk
 mk/platforms/i586_linux_2.0_glibc2.1.mk
 mk/platforms/mips_irix_6.4_6.5_common.mk
 mk/platforms/sun4_sosV_5.5.mk
 mk/platforms/sun4_sosV_5.6.mk
 mk/platforms/sun4_sosV_5.7.mk


Mon Jul 31 14:12:54 BST 2000 djr
================================

- Added new examples for ServantLocator and ServantActivator.

external_merge/src/examples/poa/dir.mak
external_merge/src/examples/poa/servant_manager/dir.mak       NEW
external_merge/src/examples/poa/servant_manager/GNUmakefile   NEW
src/examples/poa/dir.mk
src/examples/poa/servant_manager/dir.mk                       NEW
src/examples/poa/servant_manager/servant_activator.cc         NEW
src/examples/poa/servant_manager/servant_locator.cc           NEW

- Added optional command line arg to specify the message.

src/examples/echo/eg2_clt.cc

- Check that -ORBpoa_iiop_port is given on command line (ish).

src/examples/poa/persistent_objref/eg2_impl.cc


Fri Jul 28 20:20:23 BST 2000 sll
================================

- New COS idl stub library added. At the moment, this is not built
  by the top level make rules.

src/services/mklib/dir.mk                   NEW
src/services/mklib/libdefs.mk               NEW
src/services/mklib/cosinterfaces.mk         NEW
src/services/mklib/mkBOAlib/dir.mk          NEW

src/services/idl/*                          NEW
src/services/include/*                      NEW
src/services/dir.mk                         NEW


Fri Jul 28 17:37:49 BST 2000 sll
================================

- Rearranged the make rules to put the linker flags for omnithread and its
  related libraries after all the omniORB libraries.

mk/unix.mk
external_merge/mk/unix.mk


Wed Jul 26 16:21:09 BST 2000 djs
================================

- omniidl C++ backend missed forward declarations and typedefs of old
  BOA skeletons

src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py


Wed Jul 26 11:46:16 BST 2000 dpg1
=================================

- omniidl front-end incorrect error report when inheriting typedef to
  forward declared interface

src/tool/omniidl/cxx/idlast.cc


Mon Jul 24 16:09:20 BST 2000 djs
================================

- Slight typo in BOA skeleton template fix (s/fq_name/name/)

src/lib/omniORB2/omniidl_be/cxx/skel/template.py

- Suppressed compiler warning about an unused variable with stubs compiled
  using gcc -Wall when an operation has no arguments and no return value.

src/lib/omniORB2/omniidl_be/cxx/skel/main.py
src/lib/omniORB2/omniidl_be/cxx/skel/template.py


Mon Jul 24 10:33:50 BST 2000 dpg1
=================================

- Adding the missing constructor meant that there was no longer a
  default constructor.

src/lib/omniORB2/omniidl_be/cxx/header/template.py


Mon Jul 24 11:14:00 BST 2000 djs
================================

- Added missing constructor to BOA compatibile skeletons in omniidl C++
  backend

src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/omniidl_be/cxx/skel/template.py


Fri Jul 21 16:20:43 BST 2000 dpg1
=================================

- Incorrectly rejected object references with incompatible target and
  most-derived repoIds.

src/lib/omniORB2/orbcore/omniInternal.cc


Fri Jul 21 10:48:44 BST 2000 dpg1
=================================

- String_var copy initialisations changed to direct initialisations

src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/initFile.cc


Wed Jul 19 18:21:28 BST 2000 dpg1
=================================

- Thread tracing turned off.

include/omniORB3/tracedthread.h

- omniidl complains if a name which differs only in case is found
  during name look-up

src/tool/omniidl/cxx/idlscope.cc


Tue Jul 18 16:46:09 BST 2000 dpg1
=================================

- Add bugfix list

bugfixes.xml  -- new
bugfixes.xsl  -- new


Tue Jul 18 16:32:01 BST 2000 djs
================================

- added C++ backend option
   -Wbvirtual_objref
  which causes operation& attribute methods in the _objref to be virtual

src/lib/omniORB2/omniidl_be/cxx/__init__.py
src/lib/omniORB2/omniidl_be/cxx/config.py
src/lib/omniORB2/omniidl_be/cxx/header/defs.py


Mon Jul 17 15:20:18 BST 2000 dpg1
=================================

- OpenVMS patches

external_merge/etc/openvms.zip


Mon Jul 17 14:22:25 BST 2000 dpg1
=================================

- Fix string freeing bug in genior

src/appl/utils/genior/genior.cc


Mon Jul 17 10:30:00 BST 2000 djs
================================

- omniidl C++ backend (author) didn't realise an interface could
  inherit from a typedef to another interface.

src/lib/omniORB2/omniidl_be/cxx/tyutil.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py
src/lib/omniORB2/omniidl_be/cxx/header/tie.py


Thu Jul 13 19:12:53 BST 2000 sll
================================

- Missed make variable

external_merge/mk/platforms/hppa_hpux_11.00.mk
external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk

Thu Jul 13 18:15:02 BST 2000 dpg1
=================================

- Remove -g from omniMapper build

src/appl/omniMapper/dir.mk


Thu Jul 13 15:42:03 BST 2000 sll
================================

- Documentation update. Remove pre-release status

external_merge/ReleaseNote_omniORB_300              new
external_merge/ReleaseNote_omniORB_300_per3         removed
external_merge/THIS_IS_3_0_0_PRERELEASE_3           removed
external_merge/THIS_IS_omniORB_3_0_0                new


Thu Jul 13 11:51:22 BST 2000 sll
================================

- README updates

external_merge/CHANGES_280  (previously ReleaseNote_omniORB_280)
external_merge/CREDITS
external_merge/README.FIRST
external_merge/README.unix
external_merge/README.win32
external_merge/README.SGI
exteranl_merge/README.FreeBSD

external_merge/ReleaseNote_981223        removed
external_merge/ReleaseNote_omniORB_270   removed
external_merge/ReleaseNote_omniORB_271   removed
external_merge/ReleaseNote_omniORB_280   removed


Thu Jul 13 11:31:33 BST 2000 dpg1
=================================

- External documentation updates

external_merge/doc/lifecycle.pdf              -- deleted
external_merge/doc/lifecycle.ps               -- deleted
external_merge/doc/omniNames.dvi              -- deleted
external_merge/doc/omniNames.html             -- deleted
external_merge/doc/omniNames.pdf
external_merge/doc/omniNames.ps
external_merge/doc/omniNames.tex
external_merge/doc/omnithread.dvi             -- deleted
external_merge/doc/omnithread.html            -- new
external_merge/doc/omnithread.pdf
external_merge/doc/omnithread.ps
external_merge/doc/utilities.dvi              -- deleted
external_merge/doc/utilities.html             -- new
external_merge/doc/utilities.pdf
external_merge/doc/utilities.ps
external_merge/doc/utilities.tex
external_merge/doc/omniNames/node1.html       -- deleted
external_merge/doc/omniNames/node2.html       -- deleted
external_merge/doc/omniNames/node3.html       -- deleted
external_merge/doc/omniNames/omniNames.html   -- deleted
external_merge/doc/omnithread/images.aux      -- deleted
external_merge/doc/omnithread/images.log      -- deleted
external_merge/doc/omnithread/images.pl       -- deleted
external_merge/doc/omnithread/images.tex      -- deleted
external_merge/doc/omnithread/img1.gif        -- deleted
external_merge/doc/omnithread/node1.html      -- deleted
external_merge/doc/omnithread/node2.html      -- deleted
external_merge/doc/omnithread/node3.html      -- deleted
external_merge/doc/omnithread/node4.html      -- deleted
external_merge/doc/omnithread/node5.html      -- deleted
external_merge/doc/omnithread/node6.html      -- deleted
external_merge/doc/omnithread/omnithread.html -- deleted
external_merge/doc/utilities/images.aux       -- deleted
external_merge/doc/utilities/images.log       -- deleted
external_merge/doc/utilities/images.pl        -- deleted
external_merge/doc/utilities/images.tex       -- deleted
external_merge/doc/utilities/img1.gif         -- deleted
external_merge/doc/utilities/img2.gif         -- deleted
external_merge/doc/utilities/node1.html       -- deleted
external_merge/doc/utilities/node2.html       -- deleted
external_merge/doc/utilities/node3.html       -- deleted
external_merge/doc/utilities/utilities.html   -- deleted


Wed Jul 12 15:14:33 BST 2000 djs
================================

- Minor fix to omniidl/C++ backend option -Wbsplice-modules

src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py


Wed Jul 12 15:19:27 BST 2000 dpg1
=================================

- Minor fix to HTML version of omniORB manual

doc/tex/omniORB.tex
external_merge/doc/omniORB/omniORB004.html


Wed Jul 12 14:50:25 BST 2000 sll
================================

- OpenVMS merge, new rules for omniORBpy

external_merge/etc/openvms.zip



Wed Jul 12 14:18:46 BST 2000 sll
================================

- Documented IRIX CPP macro for pthread

external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk
mk/platforms/mips_irix_6.4_6.5_common.mk

Wed Jul 12 14:03:17 BST 2000 dpg1
=================================

- The default corbaloc port is 2809, not 2089 as specified in the
  specification!

doc/tex/omniORB.tex
external_merge/doc/omniORB.pdf
external_merge/doc/omniORB.ps
external_merge/doc/omniORB/omniORB004.html
external_merge/doc/omniORB/omniORB006.html
external_merge/doc/omniORB/omniORB007.html
external_merge/doc/omniORB/omniORB009.html
external_merge/doc/omniORB/omniORB010.html
external_merge/doc/omniORB/omniORB011.html
external_merge/doc/omniORB/omniORB012.html
src/lib/omniORB2/orbcore/constants.cc


Tue Jul 11 21:04:36 BST 2000 sll
================================

- Fixed a bug in dir.mk caused by a recent change that omit gatekeeper.o
  from those platforms that are built with no gatekeeper support.
  The affected platforms are HPUX, AIX and SINIX.

src/lib/omniORB2/orbcore/sharedlib/dir.mk


Tue Jul 11 20:58:59 BST 2000 sll
================================

- Create a new lib on Win32- msvcstub.lib. This can be used to resolve
  unnecessary reference from stub *SK.cc files to a few functions in
  omniDynamic300_rt.dll.
- Updated nmake examples to use the stub lib.

external_merge/src/examples/boa/dir.mak
external_merge/src/examples/call_back/dir.mak
external_merge/src/examples/echo/dir.mak
external_merge/src/examples/poa/implicit_activation/dir.mak
external_merge/src/examples/poa/persistent_objref/dir.mak
src/lib/omniORB2/orbcore/dir.mk

Tue Jul 11 16:14:24 BST 2000 dpg1
=================================

- Win32 makefile updates

external_merge/mk/win32.mk
external_merge/src/examples/boa/dir.mak
external_merge/src/examples/call_back/dir.mak
external_merge/src/examples/dii/dir.mak
external_merge/src/examples/dsi/dir.mak
external_merge/src/examples/echo/dir.mak
external_merge/src/examples/poa/implicit_activation/dir.mak
external_merge/src/examples/poa/persistent_objref/dir.mak

- Change #include from <echo.hh> to <becho.hh>

src/examples/boa/eg2_clt.cc


Tue Jul 11 13:46:58 BST 2000 sll
================================

- Updated omniidl build rules for HPUX 11.00

src/tool/omniidl/cxx/dir.mk


Tue Jul 11 13:37:05 BST 2000 sll
================================

- Added omnipython distribution for HPUX 11.00 and IRIX 6.5. Updated
  documentation to reflect this.

external_merge/README.KNOWN_ISSUES         Deleted
external_merge/README.hpux11               New
external_merge/README.SunC++5
external_merge/README.unix

external_merge/mk/platforms/hppa_hpux_11.00.mk
external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk

mk/platforms/hppa_hpux_11.00.mk
mk/platforms/mips_irix_6.4_6.5_common.mk


Tue Jul 11 11:26:48 BST 2000 dpg1
=================================

- Rationalise stdout/stderr output from catior and genior

src/appl/utils/catior/catior.cc
src/appl/utils/genior/genior.cc


Mon Jul 10 17:47:18 BST 2000 dpg1
=================================

- Change repoId of CORBA::CompletionStatus to
  IDL:omg.org/CORBA/completion_status:1.0

src/lib/omniORB2/dynamic/dynException.cc


Mon Jul 10 14:03:49 BST 2000 dpg1
=================================

- Initialisation of Any insertion functions was missing from system
  exceptions.

include/omniORB3/CORBA.h


Mon Jul 10 12:22:08 BST 2000 dpg1
=================================

- More omniORB 2 references changed

external_merge/src/examples/anyExample/dir.mak
external_merge/src/examples/dii/dir.mak
external_merge/src/examples/dsi/dir.mak
external_merge/src/examples/thread/README


Mon Jul 10 11:56:56 BST 2000 sll
================================

- openVMS build merge

external_merge/etc/openvms.zip

Mon Jul 10 11:48:04 BST 2000 sll
================================

- Minor rearrangement to keep DEC C++ 5.6 happy.

src/lib/omniORB2/orbcore/corbaOrb.cc


Mon Jul 10 11:43:51 BST 2000 dpg1
=================================

- Add patch file for AIX VisualAge C++ 5.0.

external_merge/README.aix                  -- new
external_merge/patches/README
external_merge/patches/aix_xlC_5.0.patch   -- new

- Various references to omniORB2 changed.

external_merge/README.ETSKernel
external_merge/README.Linux
external_merge/README.SunC++5
external_merge/README.unix
external_merge/README.win32


Mon Jul 10 11:41:10 BST 2000 sll
================================

- Some platforms' stream::flush() function requires an addition
  low level sync() call to ensure that the data is flushed to disk.
  Whenever a transaction is to be flushed to the redolog, omniNames now
  call reallyFlush() which may call sync() if necessary.

src/appl/omniNames/log.cc



Fri Jul  7 11:28:19 BST 2000 sll
================================

- DEC C++ 6.{0,1} on Digital Unix requires #define OMNI_REQUIRES_FQ_BASE_CTOR

include/omniORB3/CORBA_sysdep.h


Fri Jul  7 11:24:51 BST 2000 sll
================================

- More openVMS merge

external_merge/etc/openvms.zip


Fri Jul  7 11:15:21 BST 2000 sll
================================

- Fixed breakage caused by previous AIX xlC 5 checkin

include/omniORB3/CORBA_sysdep.h


Thu Jul  6 17:20:28 BST 2000 sll
================================

- Further openVMS merge

external_merge/README.openvms
external_merge/etc/openvms.zip
external_merge/patches/dec_CXX_5.6.patch
idl/ir.idl

Thu Jul  6 10:26:43 BST 2000 dpg1
=================================

- Clarify omniidl usage in documentation and omniidl -u

doc/tex/omniORB.tex
external_merge/doc/omniORB.pdf
external_merge/doc/omniORB.ps
external_merge/doc/omniORB/omniORB002.html
src/tool/omniidl/python/omniidl/main.py


Wed Jul  5 12:08:06 BST 2000 dpg1
=================================

- Untested support for AIX with xlC 5.

external_merge/config/config.mk
external_merge/mk/platforms/powerpc_aix_4.2.mk
external_merge/mk/platforms/powerpc_aix_4.2_xlc5.mk -- new
external_merge/mk/platforms/powerpc_aix_4.3_xlc5.mk -- new
include/omniORB3/CORBA_sysdep.h
src/appl/omniNames/NamingContext_i.h


Fri Jun 30 17:03:43 BST 2000 sll
================================

- openVMS merge for DEC C++ 5.6

external_merge/patches/dec_CXX_5.6.patch

Tue Jul  4 13:43:00 BST 2000 djs
================================

- Implemented missing Any insertion operator for unions
  Made function signature agree with the implementation for the exception
   Any extraction operator

src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py


Mon Jul  3 17:53:37 BST 2000 dpg1
=================================

- Remove -g from omniNames debug flags

src/appl/omniNames/dir.mk


Mon Jul  3 16:31:48 BST 2000 dpg1
=================================

- Add support for FreeBSD 4.0. FreeBSD 3.2 hopefully works too.

external_merge/config/config.mk
external_merge/mk/platforms/x86_freebsd_3.2.mk
external_merge/mk/platforms/x86_freebsd_4.0.mk     -- new
external_merge/src/lib/omniORB2/orbcore/gatekeepers/alone/gatekeeper.cc
src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc


Mon Jul 02 15:55:00 BST 2000 djs
================================

- fixed omniidl/C++ bug generating typecodes for struct members which are
  anonymous sequences

src/lib/omniORB2/omniidl_be/cxx/dynskel/typecode.py


Fri Jun 30 17:03:43 BST 2000 sll
================================

- more openVMS merge

external_merge/patches/dec_CXX_5.6.patch


Fri Jun 30 15:05:25 BST 2000 dpg1
=================================

- Minor fixes for FreeBSD

external_merge/config/config.mk
external_merge/mk/platforms/x86_freebsd_3.2.mk
include/omniORB3/CORBA_sysdep.h
src/appl/utils/genior/genior.cc
src/lib/omniORB2/orbcore/initRefs.cc
src/lib/omniORB2/orbcore/uri.cc
src/lib/omniORB2/orbcore/gatekeepers/tcpwrapper/percent_m.c
src/tool/omniidl/cxx/dir.mk


Fri Jun 30 12:21:32 BST 2000 sll
================================

- Change libtcpwrapGK shared library version number.
  This is necessary because the library depends on an internal interface
  of omniORB runtime. That interface has changed.
  The shared library version number change would allow old and new
  omniORB runtime libraries to co-exist in the same directory.
  Otherwise, the old runtime will incorrectly linked to the newer
  libtcpwrapGK library.

src/lib/omniORB2/orbcore/gatekeepers/tcpwrapper/sharedlib/dir.mk


Fri Jun 30 10:30:00 BST 2000 djs
================================

- Couple of minor possibilities for nameclashes with user code removed
  from omniIDL/C++ DynSK.cc file generation templates

src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py


Thu Jun 29 15:05:52 BST 2000 dpg1
=================================

- Incorrect visitor method called for Value nodes in Python back-end
  interface.

src/tool/omniidl/python/omniidl/idlast.py


Thu Jun 29 11:46:10 BST 2000 dpg1
=================================

- Remove -g debug flag from omniidl build

src/tool/omniidl/cxx/dir.mk


Wed Jun 28 18:43:31 BST 2000 sll
================================

- Update example makefiles for Visual studio nmake

external_merge/src/examples/anyExample/dir.mak
external_merge/src/examples/boa/dir.mak
external_merge/src/examples/call_back/dir.mak
external_merge/src/examples/echo/dir.mak
external_merge/src/examples/poa/implicit_activation/dir.mak
external_merge/src/examples/poa/persistent_objref/dir.mak


Wed Jun 28 16:38:31 BST 2000 sll
================================

- last minute update to external_merge make rules
- omkdepend no longer spit out dos drive pathnames

external_merge/mk/beforedir.mk
external_merge/bin/x86_win32/omkdepend.exe
src/tool/omkdepend/gnuwin32.c
src/tool/omniidl/cxx/dir.mk



Wed Jun 28 14:53:27 BST 2000 dpg1
=================================

- omnipython distribution doesn't have the traceback module, so remove
  C++ back-end's dependency on it.

src/lib/omniORB2/omniidl_be/cxx/util.py


Wed Jun 28 14:18:05 BST 2000 sll
================================

- revert back to the original win32 registry path, i.e.
  SOFTWARE\ORL\omniORB\2.0 to ensure backward compatibility.

src/lib/omniORB2/orbcore/initFile.cc

Wed Jun 28 12:50:18 BST 2000 sll
================================

external_merge/README.FIRST
external_merge/README.unix
external_merge/README.win32
external_merge/ReleaseNote_omniORB_300_pre2   Deleted
external_merge/README.KNOWN_ISSUES            New
external_merge/ReleaseNote_omniORB_300_pre3   New
external_merge/THIS_IS_3_0_0_PRERELEASE_2     Deleted
external_merge/THIS_IS_3_0_0_PRERELEASE_3     New

Wed Jun 28 12:45:10 BST 2000 sll
================================

- Merged HPUX and IRIX platform files

external_merge/mk/platforms/hppa_hpux_11.00.mk

Copied from external_merge:

mk/platforms/hppa_hpux_11.00.mk
mk/platforms/mips_irix_6.2_n32.mk
mk/platforms/mips_irix_6.4_6.5_common.mk
mk/platforms/mips_irix_6.4_64.mk
mk/platforms/mips_irix_6.4_n32.mk
mk/platforms/mips_irix_6.5_64.mk
mk/platforms/mips_irix_6.5_n32.mk


Tue Jun 27 18:01:44 BST 2000 sll
================================

-Merged openVMS port

external_merge/etc/openvms.zip

Tue Jun 27 17:15:58 BST 2000 sll
================================

- Merged openVMS port

external_merge/README.openvms
external_merge/README.openvms_v6
external_merge/patches/dec_CXX_5.6.patch
include/omniORB3/CORBA_sysdep.h
src/lib/omniORB2/dynamic/typecode.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/python/omniidl/main.py

Tue Jun 27 17:00:42 BST 2000 sll
================================

- Fixed assignment to an element of a sequence of string and a sequence of
  object reference. Previous version does not work if the compiler
  does not do the obvious optimisation. Only DEC v5.6 C++ compiler is known
  to be affected by this bug.

  The fix involves changing the stub and the runtime API. Rebuild the
  whole tree is necessary

include/omniORB3/CORBA.h
include/omniORB3/CORBA_vartypes.h
include/omniORB3/omniInternal.h
include/omniORB3/poa.h
include/omniORB3/poa_defs.h
include/omniORB3/stringtypes.h
include/omniORB3/tcDescriptor.h
include/omniORB3/templatedecls.h
include/omniORB3/templatedefns.h
src/lib/omniORB2/dynamic/any.cc
src/lib/omniORB2/dynamic/tcParser.cc
src/lib/omniORB2/omniidl_be/cxx/types.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py
src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/orbcore/corbaString.cc
src/lib/omniORB2/orbcore/initRefs.cc


Tue Jun 27 16:53:15 BST 2000 sll
================================

- Fixes to WIN 32 related build and compiler issues

src/tool/omniidl/cxx/dir.mk
src/tool/omniidl/cxx/idlexpr.cc
src/tool/omniidl/cxx/cccp/dir.mk

- Removed CXXDEBUGFLAGS assignment (was set to -g) in make files
src/lib/omniORB2/orbcore/dir.mk
src/lib/omniORB2/orbcore/sharedlib/dir.mk
src/lib/omniORB2/dynamic/dir.mk
src/lib/omniORB2/dynamic/sharedlib/dir.mk


Tue Jun 27 16:48:56 BST 2000 sll
================================

- Updated omkdepend to accept a new flag "-opennt". Define this flag on the
  command line to use omkdepend until uwin.

src/tool/omkdepend/gnuwin32.c
src/tool/omkdepend/gnuwin32.h
src/tool/omkdepend/main.c


Tue Jun 27 16:35:20 BST 2000 sll
================================

- trival fixes to workaround Cygnus gcc's inability to recognise
   _CORBA_Octet*& and CORBA::Octet*& are the same type.

src/appl/utils/catior/catior.cc
src/appl/utils/convertior/convertior.cc
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/ropeFactory.cc
src/lib/omniORB2/orbcore/uri.cc

Tue Jun 27 16:26:15 BST 2000 sll
================================

- Fixes to library runtime build rules.

src/lib/omniORB2/dir.mk
src/lib/omniORB2/initRefs.h
src/lib/omniORB2/dynamic/Namingdynstub.cc
src/lib/omniORB2/dynamic/bootstrapdynstub.cc
src/lib/omniORB2/dynamic/corbaidldynstub.cc
src/lib/omniORB2/dynamic/corbaidlstub.cc
src/lib/omniORB2/dynamic/irdynstub.cc
src/lib/omniORB2/dynamic/irstub.cc
src/lib/omniORB2/orbcore/Namingstub.cc
src/lib/omniORB2/orbcore/bootstrapstub.cc

Tue Jun 27 16:21:39 BST 2000 sll
================================

- Partial support for using pthread library on Windows NT
  Actual implementation of pthread library over WIN 32 API is still missing.

mk/win32.mk
src/lib/omnithread/dir.mk
src/lib/omnithread/posix.cc
include/omnithread.h
include/omnithread/posix.h
include/omnithread/pthread_nt.h

Tue Jun 27 16:09:30 BST 2000 sll
================================

- On some platforms, e.g. HPUX 11 and Windows NT, shutdown() does not
  unblock a thread in recv() when the socket is of the active type, i.e.
  a connect() was called on the socket previously.
  This is now fixed by using select or poll before calling into recv on
  these platforms.
  This is only done when the strand is outgoing. shutdown() seems to work
  fine on incoming strands.

  connect() is now non-blocking, except on OpenVMS. Previously, this is
  only done on Solaris. The effect is that client call timeout also works even
  when a connection cannot be established and the kernel takes a long
  time to report this as an error.

include/omniORB3/rope.h
src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc

Tue Jun 27 11:44:21 BST 2000 dpg1
=================================

- Small documentation updates

doc/tex/omniORB.tex
external_merge/doc/omniORB.pdf
external_merge/doc/omniORB.ps
external_merge/doc/omniORB/index.html
external_merge/doc/omniORB/omniORB001.html
external_merge/doc/omniORB/omniORB002.html
external_merge/doc/omniORB/omniORB003.html
external_merge/doc/omniORB/omniORB005.html
external_merge/doc/omniORB/omniORB006.html
external_merge/doc/omniORB/omniORB007.html
external_merge/doc/omniORB/omniORB008.html
external_merge/doc/omniORB/omniORB009.html
external_merge/doc/omniORB/omniORB010.html
external_merge/doc/omniORB/omniORB011.html
external_merge/doc/omniORB/omniORB012.html

- Remove everything to do with obsolete LifeCycle support

external_merge/src/examples/lifecycle/GNUmakefile                -- deleted
external_merge/src/examples/lifecycle/dir.mak                    -- deleted
external_merge/src/lib/omniORB2/lifecycle/GNUmakefile            -- deleted
external_merge/src/lib/omniORB2/lifecycle/sharedlib/GNUmakefile  -- deleted
src/examples/lifecycle/OBSOLETE                                  -- new
src/examples/lifecycle/dir.mk                                    -- deleted
src/examples/lifecycle/echolag.idl                               -- deleted
src/examples/lifecycle/lcclient.cc                               -- deleted
src/examples/lifecycle/lcexamples.module                         -- deleted
src/examples/lifecycle/lcremove.cc                               -- deleted
src/examples/lifecycle/lcserver.cc                               -- deleted
src/lib/omniORB2/lifecycle/OBSOLETE                              -- new
src/lib/omniORB2/lifecycle/dir.mk                                -- deleted
src/lib/omniORB2/lifecycle/omniLifeCycle.cc                      -- deleted
src/lib/omniORB2/lifecycle/reDirect.cc                           -- deleted
src/lib/omniORB2/lifecycle/sharedlib/dir.mk                      -- deleted



Mon Jun 26 17:15:00 BST 2000 djs
================================

- Added new omniIDL/C++ compiler backend flags & features:
  -Wbd=suffix      : changes the DynSK.cc file suffix
  -Wbkeep_inc_path : Preserves IDL #include path in generated C++ header
  -Wbuse_quotes    : Uses "" rather than <> in C++ header #includes

src/lib/omniORB2/omniidl_be/cxx/__init__.py
src/lib/omniORB2/omniidl_be//cxx/header/template.py
doc/tex/omniORB.tex

- Added better handling of unsupported IDL constructs

src/lib/omniORB2/omniidl_be/cxx/__init__.py
src/lib/omniORB2/omniidl_be/cxx/types.py
src/lib/omniORB2/omniidl_be/cxx/util.py

- Fixed platform specific path handling for #includes

src/lib/omniORB2/omniidl_be/cxx/__init__.py

- Changed the global configuration state mechanism

src/lib/omniORB2/omniidl_be/cxx/config.py
src/lib/omniORB2/omniidl_be/cxx/id.py
src/lib/omniORB2/omniidl_be/cxx/types.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/__init__.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/typecode.py
src/lib/omniORB2/omniidl_be/cxx/header/__init__.py
src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/forward.py
src/lib/omniORB2/omniidl_be/cxx/header/opers.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py
src/lib/omniORB2/omniidl_be/cxx/header/tie.py
src/lib/omniORB2/omniidl_be/cxx/impl/__init__.py
src/lib/omniORB2/omniidl_be/cxx/skel/__init__.py
src/lib/omniORB2/omniidl_be/cxx/skel/dispatch.py
src/lib/omniORB2/omniidl_be/cxx/skel/main.py
src/lib/omniORB2/omniidl_be/cxx/skel/mangler.py


Thu Jun 22 11:22:01 BST 2000 dpg1
=================================

- Transport code now throws omniConnectionBroken exception rather than
  CORBA::COMM_FAILURE when things go wrong. This allows the invocation
  code to distinguish between transport problems and COMM_FAILURES
  propagated from the server side.

- exception.h renamed to exceptiondefs.h to avoid name clash on some
  platforms.

src/lib/omniORB2/exception.h       -- deleted
src/lib/omniORB2/exceptiondefs.h   -- new
src/lib/omniORB2/dynamic/request.cc
src/lib/omniORB2/orbcore/exceptn.cc
src/lib/omniORB2/orbcore/giopClient.cc
src/lib/omniORB2/orbcore/giopServer.cc
src/lib/omniORB2/orbcore/remoteIdentity.cc
src/lib/omniORB2/orbcore/strand.cc
src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc

- #includes changed to reflect the renaming of exception.h

src/lib/omniORB2/dynamic/context.cc
src/lib/omniORB2/dynamic/contextList.cc
src/lib/omniORB2/dynamic/dynAny.cc
src/lib/omniORB2/dynamic/dynException.cc
src/lib/omniORB2/dynamic/dynamicImplementation.cc
src/lib/omniORB2/dynamic/environment.cc
src/lib/omniORB2/dynamic/exceptionList.cc
src/lib/omniORB2/dynamic/ir.cc
src/lib/omniORB2/dynamic/namedValue.cc
src/lib/omniORB2/dynamic/nvList.cc
src/lib/omniORB2/dynamic/serverRequest.cc
src/lib/omniORB2/dynamic/typecode.h
src/lib/omniORB2/orbcore/callDescriptor.cc
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaObject.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/corbaString.cc
src/lib/omniORB2/orbcore/dynamicLib.cc
src/lib/omniORB2/orbcore/exception.cc
src/lib/omniORB2/orbcore/initFile.cc
src/lib/omniORB2/orbcore/initRefs.cc
src/lib/omniORB2/orbcore/ior.cc
src/lib/omniORB2/orbcore/localIdentity.cc
src/lib/omniORB2/orbcore/mbufferedStream.cc
src/lib/omniORB2/orbcore/nbufferedStream.cc
src/lib/omniORB2/orbcore/objectAdapter.cc
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/omniORB.cc
src/lib/omniORB2/orbcore/omniObjRef.cc
src/lib/omniORB2/orbcore/omniServant.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poamanager.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/lib/omniORB2/orbcore/relStream.cc
src/lib/omniORB2/orbcore/tcpSocket.cc
src/lib/omniORB2/orbcore/uri.cc


Thu Jun 22 09:59:43 BST 2000 djr
================================

- Fixed assertion failure (locking bug).

src/lib/omniORB2/orbcore/corbaBoa.cc


Tue Jun 20 14:51:11 BST 2000 dpg1
=================================

- omniidl now keeps the C++ tree until after the back-ends have run.
  This means that back-ends can be C++ extension modules.

src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/python/omniidl/main.py


Mon Jun 19 18:39:00 BST 2000 djs
================================

- C++ mapping: Implemented union discriminant setting function _d(_value)
  with checks for illegal use

src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py


Mon Jun 19 16:23:03 BST 2000 dpg1
=================================

- Even more explicit casts to (const char*) when using String_var with
  logger

src/appl/utils/nameclt/nameclt.cc
src/appl/omniMapper/omniMapper.cc


Mon Jun 19 15:14:30 BST 2000 dpg1
=================================

- More explicit casts to (const char*) when using String_var with logger

src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/initFile.cc
src/lib/omniORB2/orbcore/uri.cc


Mon Jun 19 14:52:39 BST 2000 dpg1
=================================

- Explicit cast to (const char*) when using String_var with logger

src/lib/omniORB2/orbcore/initRefs.cc


Fri Jun 16 09:33:00 BST 2000 djs
================================

- omniIDL C++ union bug: when discriminant is a boolean and the union
  has a single FALSE case (therefore it has an implied default) it picked
  a bad default value.

src/lib/omniORB2/omniidl_be/cxx/header/defs.py


Wed Jun 14 15:33:29 BST 2000 dme
================================
- Update omkdepend and the various win32 wrappers for Cygwin's new
  "mounts v2" registry subtree.  Old Gnuwin32 mounts should still work.

src/tool/omkdepend/gnuwin32.c
src/tool/win32/clwrapper.c
src/tool/win32/libwrapper.c
src/tool/win32/linkwrapper.c
src/tool/win32/oidlwrapper.c

external_merge/bin/x86_win32/clwrapper.exe
external_merge/bin/x86_win32/libwrapper.exe
external_merge/bin/x86_win32/linkwrapper.exe
external_merge/bin/x86_win32/oidlwrapper.exe
external_merge/bin/x86_win32/omkdepend.exe


Mon Jun 12 14:17:00 BST 2000 djs
================================

- Now skips generating BOA ties for modules #included from another file

src/lib/omniORB2/omniidl_be/cxx/header/tie.py

- Nolonger claims code was generated by "omniidl3" in the headers of
  generated files- now takes responsibilty for its own actions :)

src/lib/omniORB2/omniidl_be/cxx/config.py


Mon Jun 12 12:11:44 BST 2000 dpg1
=================================

- Clarifying comment about TRANSIENT exceptions on exiting HOLDING state.

src/lib/omniORB2/orbcore/poa.cc

- Global exception handlers were returning a zero cookie

src/lib/omniORB2/orbcore/exception.cc

- sll's fix for rope deletion race condition

src/lib/omniORB2/orbcore/strand.cc


Fri Jun  9 12:01:25 BST 2000 dpg1
=================================

- Off-by-one error in line number for __omni_pragma pragmas.

src/tool/omniidl/cxx/idl.ll
src/tool/omniidl/cxx/idl.yy
src/tool/omniidl/cxx/lex.yy.cc
src/tool/omniidl/cxx/y.tab.cc
src/tool/omniidl/cxx/y.tab.h


Thu Jun  8 15:21:49 BST 2000 dpg1
=================================

- Comments and pragmas are now objects rather than plain strings, so
  they can have file,line associated with them.

doc/tex/omniidl.tex
external_merge/doc/omniidl.html
external_merge/doc/omniidl.pdf
external_merge/doc/omniidl.ps
src/tool/omniidl/cxx/idl.ll
src/tool/omniidl/cxx/idl.yy
src/tool/omniidl/cxx/idlast.cc
src/tool/omniidl/cxx/idlast.h
src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/cxx/lex.yy.cc
src/tool/omniidl/cxx/y.tab.cc
src/tool/omniidl/python/omniidl/idlast.py


Tue Jun  6 16:49:43 BST 2000 dpg1
=================================

- Add draft omniidl developers manual

doc/tex/omniidl.tex                  -- new
external_merge/doc/omniidl.html      -- new
external_merge/doc/omniidl.pdf       -- new
external_merge/doc/omniidl.ps        -- new


Tue Jun  6 16:17:00 BST 2000 dpg1
=================================

- Comments and pragmas attached to attribute declarators are now
  attached to the Python Attribute object.

src/tool/omniidl/cxx/idlpython.cc


Tue Jun  6 15:40:00 BST 2000 djs
================================

- omniidl C++: produces flattened name typedefs for _all_ inherited
  interfaces, not just immediate decendents in SK.cc file

src/lib/omniORB2/omniidl_be/cxx/skel/main.py


Mon Jun  5 19:07:01 BST 2000 dpg1
=================================

- omniidl updates:

  - support for __omni_pragma
  - comments can be attached to subsequent declarations (with -K)
  - better idea of most recent decl in operation declarations

src/tool/omniidl/cxx/idl.ll
src/tool/omniidl/cxx/idl.yy
src/tool/omniidl/cxx/idlast.cc
src/tool/omniidl/cxx/idlast.h
src/tool/omniidl/cxx/idlconfig.cc
src/tool/omniidl/cxx/idlconfig.h
src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/cxx/lex.yy.cc
src/tool/omniidl/cxx/y.tab.cc
src/tool/omniidl/python/omniidl/main.py

- Documentation for new -K omniidl flag

doc/tex/omniORB.tex
external_merge/doc/omniORB.pdf
external_merge/doc/omniORB.ps
external_merge/doc/omniORB/omniORB005.html


Mon Jun  5 13:55:00 BST 2000 djs
================================

- omniIDL C++ backend fixes:

-   Nested union (within union) fix

src/lib/omniORB2/omniidl_be/cxx/header/forward.py

-   Name clash caused by having union members called "x" and "pd_x"
    (for any value of x) in the same union

src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/omniidl_be/cxx/skel/main.py
src/lib/omniORB2/omniidl_be/cxx/skel/template.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py

-   More name clashes with internal identifiers removed:
      Union member called "pd__default"
      Union member called "pd__d"
      Sequence called "pd_seq"

src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/omniidl_be/cxx/skel/main.py
src/lib/omniORB2/omniidl_be/cxx/skel/template.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py

-   Tie template class name parameter changed from T to _T

src/lib/omniORB2/omniidl_be/cxx/header/template.py

-   Tie template generation tidied up and now actually generates templates
    for BOA non-flat templates (-WbBOA -Wbtp)

src/lib/omniORB2/omniidl_be/cxx/header/__init__.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py
src/lib/omniORB2/omniidl_be/cxx/header/tie.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py


Fri Jun  2 17:56:16 BST 2000 dpg1
=================================

- Sections on BOA compatibility, flattened ties, and example code
  generation added to omniORB manual

doc/tex/omniORB.tex
external_merge/doc/omniORB.pdf
external_merge/doc/omniORB.ps
external_merge/doc/omniORB/index.html
external_merge/doc/omniORB/omniORB002.html
external_merge/doc/omniORB/omniORB003.html
external_merge/doc/omniORB/omniORB004.html
external_merge/doc/omniORB/omniORB005.html
external_merge/doc/omniORB/omniORB006.html
external_merge/doc/omniORB/omniORB007.html
external_merge/doc/omniORB/omniORB008.html
external_merge/doc/omniORB/omniORB009.html
external_merge/doc/omniORB/omniORB010.html
external_merge/doc/omniORB/omniORB011.html
external_merge/doc/omniORB/omniORB012.html


Fri Jun  2 17:07:20 BST 2000 dpg1
=================================

- If an object is deactivated while its POA is in the HOLDING state,
  clients which were held now receive a TRANSIENT exception when the
  POA becomes active again.

src/lib/omniORB2/orbcore/localIdentity.h
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poaimpl.h


Fri Jun  2 15:13:29 BST 2000 dpg1
=================================

- SystemException constructors now public so exceptions caught by base
  class can be rethrown

include/omniORB3/CORBA.h

- Add static install() method to initialiser so extra initialisers /
  deinitialisers can be added at run time (needed by omniORBpy).

src/lib/omniORB2/initialiser.h
src/lib/omniORB2/orbcore/corbaOrb.cc

- Race condition in tracedcondition

src/lib/omniORB2/orbcore/tracedthread.cc

- Using boa_lock for the nil BOA's condition variable caused an
  assertion failure on exit.

src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaBoa.h


Wed May 31 19:00:00 BST 2000 djs
================================

- C++ back-end now indents output more correctly (including pre-processor
  directives)

src/lib/omniORB2/omniidl_be/cxx/skutil.py
src/lib/omniORB2/omniidl_be/cxx/util.py
src/lib/omniORB2/omniidl_be/cxx/header/__init__.py
src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/tie.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/omniidl_be/cxx/skel/__init__.py
src/lib/omniORB2/omniidl_be/cxx/skel/main.py
src/lib/omniORB2/omniidl_be/cxx/skel/proxy.py
src/lib/omniORB2/omniidl_be/cxx/skel/template.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/__init__.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py
src/lib/omniORB2/omniidl_be/cxx/impl/__init__.py

- calling an IDL exception "e" resulted in a name clash

src/lib/omniORB2/omniidl_be/cxx/skel/template.py


Wed May 31 16:06:02 BST 2000 dpg1
=================================

- C++ back-end properly handles Windows paths

src/lib/omniORB2/omniidl_be/cxx/__init__.py


Tue May 20 16:57:00 BST 2000 djs
================================

- Removed C++ inheritance ambiguity in BOA _sk_ classes and POA_ classes
  generated by omniIDL

src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py
src/lib/omniORB2/omniidl_be/cxx/header/template.py


Thu May 25 09:43:57 BST 2000 dpg1
=================================

- Forgot _core_attr onn IIOP::DEFAULT_CORBALOC_PORT

include/omniORB3/IIOP.h


Wed May 24 18:30:11 BST 2000 dpg1
=================================

- Rename IIOP::DEFAULT_PORT to IIOP::DEFAULT_CORBALOC_PORT

include/omniORB3/IIOP.h
src/lib/omniORB2/orbcore/constants.cc
src/lib/omniORB2/orbcore/uri.cc

- Clarify comments

include/omniORB3/omniORB.h

- Add documented but non-existent -ORBobjectTableSize and
  -ORBno_bootstrap_agent arguments

src/lib/omniORB2/orbcore/corbaOrb.cc

- Fix const-correctness in error reporting functions

src/lib/omniORB2/orbcore/initFile.cc
src/lib/omniORB2/orbcore/initFile.h

- omniNames now creates a forwarding agent with object key
  `NameService' if the root context doesn't already have that key.

src/appl/omniNames/INSMapper.h -- new
src/appl/omniNames/log.cc
src/appl/omniNames/omniNames.cc

- References to omniORB 2 manual removed from comments

src/examples/echo/eg3_impl.cc
src/examples/echo/eg3_clt.cc
src/examples/echo/eg2_impl.cc
src/examples/echo/eg2_clt.cc
src/examples/echo/eg1.cc
src/examples/anyExample/anyExample_impl.cc
src/examples/anyExample/anyExample_clt.cc
src/examples/anyExample/anyExample.idl

- Added omniMapper.

src/appl/omniMapper/omniMapper.cc               -- new
src/appl/omniMapper/dir.mk                      -- new
src/appl/dir.mk
external_merge/src/appl/omniMapper/GNUmakefile  -- new

- Minor omniidl usage message fix.

src/lib/omniORB2/omniidl_be/cxx/__init__.py

- Add draft omniORB 3 manual; remove omniORB 2 manual.

doc/tex/omniORB.bib              -- new
doc/tex/omniORB.tex              -- new
doc/tex/omniORB2.tex             -- removed
external_merge/doc/omniORB.pdf   -- new
external_merge/doc/omniORB.ps    -- new
external_merge/doc/omniORB2.dvi  -- removed
external_merge/doc/omniORB2.pdf  -- removed
external_merge/doc/omniORB2.ps   -- removed
external_merge/doc/omniORB2.tex  -- removed
external_merge/doc/omniORB/*     -- new
external_merge/doc/omniORB2/*    -- removed



Thu May 18 16:45:00 BST 2000 djs
================================

- omniIDL C++ backend failed to produce simple T* data constructors as
  describled in OMG C++ mapping (June1999) Sect1-13, 1-39 for bounded
  sequences

src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/omniidl_be/cxx/header/defs.py


Tue May 16 12:10:00 BST 2000 djs
================================

- Updated omniIDL C++ example interface implementation generator
  (invoked by passing -Wbexample to omniidl)
  Now produces simple skeletons with the right signatures and with #warnings
  where the user should have edited the output.

src/lib/omniORB2/omniidl_be/cxx/impl/__init__.py
src/lib/omniORB2/omniidl_be/cxx/impl/main.py
src/lib/omniORB2/omniidl_be/cxx/impl/template.py


Fri May  5 19:57:44 BST 2000 dpg1
=================================

- Back out the INS POA change since it doesn't work!

src/lib/omniORB2/orbcore/poa.cc


Fri May  5 17:53:47 BST 2000 dpg1
=================================

- Bug in HandleLocateRequest() when catching a LOCATION_FORWARD

src/lib/omniORB2/orbcore/giopServer.cc

- The magic INS POA now has the USE_SERVANT_MANAGER policy, with the
  small exception that it raises OBJECT_NOT_EXIST rather than
  OBJ_ADAPTER if no servant activator has been registered. This change
  allows some cunning hackery, such as the omniMapper which will land
  soon.

src/lib/omniORB2/orbcore/poa.cc


Fri May  5 17:32:00 BST 2000 djs
================================

- Extended an existing omniIDL/C++ fix for MSVC5 to help with base class
  initialisers with scope resolution operators (::)
  A fix already existed for the method dispatch()ing, using a typedef with
  a flattened name. This does not change the powerpc/aix workaround using
  OMNI_BASE_CTOR (no test platform to check against).
  Problem was reported on the mailing list in article:
    http://www.uk.research.att.com/omniORB/archives/2000-03/0146.html

src/lib/omniORB2/omniidl_be/cxx/skel/main.py
src/lib/omniORB2/omniidl_be/cxx/skel/template.py

- Removed omniIDL/C++ operation argument mapping special case:
  A non-array typedef to a variable struct or union previously used a
  dereferenced _out argument. Now the _out argument is not dereferenced.

src/lib/omniORB2/omniidl_be/cxx/types.py


Fri May  5 14:11:23 BST 2000 dpg1
=================================

- ir.idl updated to the (updated!) CORBA 2.3.1 definitions.

idl/ir.idl


Thu May  4 15:11:00 BST 2000 djs
================================

- omniIDL C++ backend outputs reopened modules in separate fragments
  and a new backend flag -Wbsplice-modules has been added to copy
  the old behaviour by outputting all the continuations as one lump.

src/lib/omniORB2/omniidl_be/cxx/__init__.py
src/lib/omniORB2/omniidl_be/cxx/config.py
src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/typecode.py


Tue May  2 16:22:06 BST 2000 dpg1
=================================

- Makefile fixes for gcc on Solaris

src/lib/omniORB2/orbcore/gatekeepers/tcpwrapper/sharedlib/dir.mk
src/tool/omniidl/cxx/dir.mk


Fri Apr 28 11:19:12 BST 2000 dme
================================
- merge changes of Jan 18 & 19 from omni2_8_develop

  [ Wed Jan 19 10:40:23 GMT 2000 dme
    ================================
    - update compiled wrapper .exes in external_merge/

    Tue Jan 18 14:54:30 GMT 2000 dme
    ================================

    - new DIR_IDLFLAGS, DIR_STUBS_CPPFLAGS make it possible to compile
      interfaces and stubs that depend on idl from import trees without
      generating headers and stubs for those imported idls locally.  This is
      useful when the import tree supplies the headers and stubs itself,
      usually as part of some library.

    - Win32 now uses filename-translating wrappers for omniidl[2].exe, allowing
      fearless use of "-I" etc.
    - fixed strncpy()-related bug in all Win32 wrappers
  ]

external_merge/bin/x86_win32/clwrapper.exe
external_merge/bin/x86_win32/libwrapper.exe
external_merge/bin/x86_win32/linkwrapper.exe

mk/afterdir.mk
mk/beforedir.mk
mk/win32.mk

src/tool/win32/bccwrapper.c
src/tool/win32/clwrapper.c
src/tool/win32/libwrapper.c
src/tool/win32/linkwrapper.c
src/tool/win32/tlibwrapper.c
src/tool/win32/tlinkwrapper.c


Thu Apr 27 12:13:00 BST 2000 dpg1
=================================

- Removed obsolete omniidl2 sources.

external_merge/src/tool/omniidl2/*  -- removed
src/tool/omniidl2/*                 -- removed


Thu Apr 27 12:07:02 BST 2000 dpg1
=================================

- added i586_linux_2.0_glibc2.1 comment (should have been done on 30
  Mar)

external_merge/config/config.mk

- ORB core changes for Interoperable Naming Service

idl/Naming.idl
include/omniORB3/IIOP.h
include/omniORB3/omniInternal.h
include/omniORB3/omniURI.h                         -- new
src/lib/dir.mk
src/lib/omniORB2/bootstrap_i.h                     -- removed
src/lib/omniORB2/initRefs.h                        -- new
src/lib/omniORB2/orbcore/bootstrap_i.cc            -- removed
src/lib/omniORB2/orbcore/constants.cc
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/dir.mk
src/lib/omniORB2/orbcore/giopServer.cc
src/lib/omniORB2/orbcore/initFile.cc
src/lib/omniORB2/orbcore/initRefs.cc               -- new
src/lib/omniORB2/orbcore/ior.cc
src/lib/omniORB2/orbcore/objectAdapter.cc
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poaimpl.h
src/lib/omniORB2/orbcore/portableserver.cc
src/lib/omniORB2/orbcore/uri.cc                    -- new
src/lib/omniORB2/orbcore/sharedlib/dir.mk

- Dynamic lib changes due to INS reorganisation

src/lib/omniORB2/dynamic/dynamicImplementation.cc
src/lib/omniORB2/dynamic/ir.cc

- Application changes for Interoperable Naming Service

src/appl/omniNames/NamingContext_i.cc
src/appl/omniNames/NamingContext_i.h
src/appl/omniNames/log.cc
src/appl/omniNames/log.h
src/appl/omniNames/omniNames.cc
src/appl/utils/nameclt/nameclt.cc


Wed Apr 26 19:18:00 BST 2000 djs
================================

- Removed superflous "externs" in front of function definitions

src/lib/omniORB2/omniidl_be/cxx/skel/template.py

- Changed type mapping code and identifier handling code

src/lib/omniORB2/omniidl_be/cxx/types.py -- new
src/lib/omniORB2/omniidl_be/cxx/id.py    -- new

- Rippled changes thoughout rest of C++ backend

src/lib/omniORB2/omniidl_be/cxx/* (ALL)


Thu Apr 20 16:08:04 BST 2000 djr
================================

- Fixed bug when duplicating nil object references.
  omni::duplicateObjRef should not be called for nil references.

src/lib/omniORB2/omniidl_be/cxx/skel/template.py


Thu Apr 13 18:44:45 BST 2000 djr
================================

- Eliminated a case where it is necassary to contact an object to
  verify its type.  No need to clear type_verified if target repo
  id is CORBA::Object.

src/lib/omniORB2/orbcore/omniInternal.cc


Wed Apr 5 11:50:00 BST 2000 djs
===============================

- omniIDL C++ backend code tidying

src/lib/omniORB2/omniidl_be/cxx/header/defs.py
src/lib/omniORB2/omniidl_be/cxx/header/poa.py

- scoping bug wrt generated proxies for attributes

src/lib/omniORB2/omniidl_be/cxx/skel/main.py

- DynSK.cc generation was slightly broken when a union had a switch
  type included from another file (missing extern function declaration)

src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py


Thu Mar 30 12:34:26 BST 2000 dpg1
=================================

- Added i586_linux_2.0_glibc2.1 platform

mk/platforms/i586_linux_2.0_glibc2.1.mk                 -- new (by dme)
external_merge/mk/platforms/i586_linux_2.0_glibc2.1.mk  -- new


Tue Mar 28 19:19:00 GMT 2000 djs
================================

- omniIDL C++ backend output broken sequence deletion function
  (the function used the non-escaped name "data" which could clash
  with user identifiers)
    eg    typedef sequence<double> data
  produced broken code.

src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py


Fri Mar 24 22:26:00 GMT 2000 djs
================================

- Major restructuring of omniIDL C++ backend DynSK.cc generating code:
  Control flow is more recursive and obvious
  Common blocks have been factored out
  Distinguishes between forward declarations and extern declarations
  Outputs prototypes at most once; same with function blocks

src/lib/omniORB2/omniidl_be/cxx/dynskel/bdesc.py (removed)
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/__init__.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/dir.mk


Fri Mar 24 17:32:02 GMT 2000 dpg1
=================================

- Incorrect make variable name for IRIX and Reliant Unix

src/tool/omniidl/cxx/dir.mk


Fri Mar 24 16:19:00 GMT 2000 djs
================================

- omniIDL output some invalid C++ typedefs in the case of typedefs
  to object references

src/lib/omniORB2/omniidl_be/cxx/header/defs.py

- omniIDL needed some " "s after "<" and ">" (the maximal-munch
  C++ parsing problem)

src/lib/omniORB2/omniidl_be/cxx/tyutil.py


Fri Mar 24 16:14:00 GMT 2000 djs
================================

- Fixed C++ Any extraction operators which stopped the DynSK.cc
  file corresponding to this IDL fragment from parsing (due to a
  name clash)
    typedef sequence<long> a;
  (bug was copied accidentally from omniidl3)

- minor formatting changes to DynSK.cc output templates

src/lib/omniORB2/omniidl_be/cxx/dynskel/template.py


Thu Mar 23 16:20:29 GMT 2000 djr
================================

- Added NEED_DUMMY_RETURN for gcc/egcs.

include/omniORB3/CORBA_sysdep.h


Thu Mar 23 15:27:00 GMT 2000 djs
================================

- omniidl C++ backend failed to handle recursive unions where
  there was more than one node in the cycle
  (even though it has functions specifically to handle this
  properly)

src/lib/omniORB2/omniidl_be/cxx/dynskel/typecode.py


Tue Mar 21 10:56:00 GMT 2000 djs
================================

- omniidl C++ backend -WbF (generate fragments) output class
  fixed

src/lib/omniORB2/omniidl_be/cxx/header/__init__.py


Mon Mar 20 15:00:13 GMT 2000 djr
================================

- Signed/unsigned mismatch fixed.

src/lib/omniORB2/dynamic/typecode.cc


Mon Mar 20 11:51:00 GMT 2000 djs
================================

- reduced excess output buffering in the omniidl C++ backend
  by attaching function pointers (pseudo-closures) to template
  holes, which are only evaluated when the template is finally
  output.

src/lib/omniORB2/omniidl_be/cxx/util.py
src/lib/omniORB2/omniidl_be/cxx/header/*
src/lib/omniORB2/omniidl_be/cxx/skel/*

- better generation of DynSK.cc code for unions with externally
  defined switch types

src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py

Fri Mar 17 16:26:42 GMT 2000 dpg1
=================================

- Another small improvement to omniidl's error reporting

src/tool/omniidl/python/omniidl/main.py


Thu Mar 16 17:25:53 GMT 2000 dpg1
=================================

- Bug with comments in omniidl input when keepComments is false.

src/tool/omniidl/cxx/idlast.cc


Thu Mar 16 16:17:00 GMT 2000 djs
================================

- omniidl missed an extern declaration because it failed to
  dereference a typedef chain leading to a structure defined
  in another file

src/lib/omniORB2/omniidl_be/cxx/dynskel/bdesc.py


Thu Mar 16 14:13:38 GMT 2000 djr
================================

- Gotten rid of signed/unsigned warning.

src/lib/omniORB2/orbcore/tcpSockMTfactory.cc


Thu Mar 16 11:06:51 GMT 2000 dpg1
=================================

- Extra error reporting in omniidl. Redundant code removed from
  omniidl script.

src/tool/omniidl/python/omniidl/main.py
src/tool/omniidl/python/scripts/omniidl


Wed Mar 15 20:46:00 GMT 2000 djs
================================

- Fixed IDL->C++ problem with using a typedef to an array
  declarator or a sequence in another file (DynSK.cc problem)
  within a struct or union. Some refactoring in the DynSK code
  is required.

src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py
src/lib/omniORB2/omniidl_be/cxx/dynskel/bdesc.py


Tue Mar 14 14:52:02 GMT 2000 dpg1
=================================

- Incorrect message with omniidl -E

src/tool/omniidl/python/omniidl/main.py


Mon Mar 13 15:58:00 GMT 2000 djs
================================

- Fixed problem with tie template generation in C++ omniidl
  backend (pointed out by djr) involving duplicate methods

src/lib/omniORB2/omniidl_be/cxx/header/tie.py

- Disabled emulating old broken behaviour (specifically repoID
  mangling and some scope problems)

src/lib/omniORB2/omniidl_be/cxx/tyutil.py
src/lib/omniORB2/omniidl_be/cxx/config.py


Mon Mar 13 12:27:00 GMT 2000 djs
================================

- Added simple perl script to reformat omniidl's C++ output.
  (to make it easier to perform visual inspection)

src/lib/omniORB2/omniidl_be/cxx/tools/pretty


Fri Mar 10 16:43:09 GMT 2000 dpg1
=================================

- MSVC++ cannot catch exceptions by base class

include/omniORB3/CORBA_sysdep.h


Fri Mar 10 16:16:32 GMT 2000 djs
================================

- Fixed to omniidl C++ backend when generating ObjRef_OUT names
  (prefix added to wrong place, ie prefix_A::B rather than A::prefix_B)

src/lib/omniORB2/omniidl_be/cxx/tyutil.py


Fri Mar 10 11:57:45 GMT 2000 djr
================================

- Fixed omniidl back again (made exception _NP_duplicate public).

src/lib/omniORB2/omniidl_be/cxx/header/template.py


Fri Mar 10 11:00:51 GMT 2000 dpg1
=================================

- Fix to omniidl for VFAT drives in Windows (case sentivity problem)

src/tool/omniidl/cxx/idlpython.cc


Tue Mar  7 18:04:04 GMT 2000 djr
================================

- Fixed user-exception handling on server side when exceptions cannot
  be caught by base class.

include/omniORB3/omniORB.h
src/lib/omniORB2/omniidl_be/cxx/header/template.py
src/lib/omniORB2/orbcore/giopServer.cc


Mon Mar  6 14:59:45 GMT 2000 dpg1
=================================

- Minor bugfixes to omniidl. Add -nf flag to suppress warnings about
  unresolved forward declarations. Add -k flag to keep IDL comments in
  AST.

src/tool/omniidl/cxx/dir.mk
src/tool/omniidl/cxx/idl.ll
src/tool/omniidl/cxx/idlast.cc
src/tool/omniidl/cxx/idlast.h
src/tool/omniidl/cxx/idlconfig.cc   -- new
src/tool/omniidl/cxx/idlconfig.h    -- new
src/tool/omniidl/cxx/idlerr.cc
src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/cxx/idlvalidate.cc
src/tool/omniidl/cxx/lex.yy.cc
src/tool/omniidl/python/omniidl/idlast.py
src/tool/omniidl/python/omniidl/main.py


Fri Mar  3 14:23:36 GMT 2000 djr
================================

- Minor improvement to BOA skeleton support.  Reduces amount of
  generated code required, and solves problems with ambiguous names
  in multiply-inherited descendants.  (NB. Still outstanding problem
  with _this(), but not sure why).

include/omniORB3/CORBA.h
include/omniORB3/boa.h
include/omniORB3/omniORB.h
src/lib/omniORB2/omniidl_be/cxx/header/template.py


Fri Mar  3 09:41:28 GMT 2000 djr
================================

- Fixed bug in library which could lead to a tracedmutex assertion
  being triggered in some circumstances.  Reported as a bug in
  omniNames.

src/lib/omniORB2/orbcore/objectAdapter.cc


Thu Mar  2 11:20:30 GMT 2000 dpg1
=================================

- Having a command named omniidl.py caused import omniidl.main to fail
  in some circumstances. Renamed to omniidlrun.py.

src/tool/omniidl/python/omniidl/main.py
src/tool/omniidl/python/scripts/dir.mk
src/tool/omniidl/python/scripts/omniidl
src/tool/omniidl/python/scripts/omniidl.py     -- removed
src/tool/omniidl/python/scripts/omniidlrun.py  -- new


Thu Mar  2 10:22:40 GMT 2000 dpg1
=================================

- omniidl.py now prints the cause of the ImportError if it can't find
  the omniidl Python files.

src/tool/omniidl/python/scripts/omniidl.py


Wed Mar  1 17:55:15 GMT 2000 dpg1
=================================

- New omniObjRef::_compatibleServant() function to support object
  references and servants written for languages other than C++.

include/omniORB3/omniObjRef.h
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/omniObjRef.cc


Wed Mar  1 12:24:49 GMT 2000 dpg1
=================================

- Bug with AdapterActivators

src/lib/omniORB2/orbcore/poa.cc


Wed Feb 23 12:53:39 GMT 2000 dpg1
=================================

- Some support for NextStep x86. ORB core doesn't have make rules for
  it, though.

external_merge/config/config.mk
external_merge/mk/platforms/x86_nextstep_3.3.mk  -- new
include/omniORB3/CORBA_sysdep.h
src/lib/omnithread/mach.cc
src/tool/omniidl/cxx/dir.mk
src/tool/omniidl/cxx/cccp/config-nextstep.h      -- new
src/tool/omniidl/cxx/cccp/config.h


Tue Feb 22 18:36:17 GMT 2000 djr
================================

- Workaround in omniNames for mips compiler bug.

src/appl/omniNames/BindingIterator_i.h


Tue Feb 22 17:06:52 GMT 2000 dpg1
=================================

- Documentation and makefile updates for omniORB 3 pre 2 release
- OMNIORB_VERSION defined in unix.mk and win32.mk

external_merge/PORTING
external_merge/README.FIRST
external_merge/README.unix
external_merge/README.win32
external_merge/ReleaseNote_omniORB_300_pre1    -- deleted
external_merge/ReleaseNote_omniORB_300_pre2    -- new
external_merge/THIS_IS_3_0_0_PRERELEASE_1      -- deleted
external_merge/THIS_IS_3_0_0_PRERELEASE_2      -- new
external_merge/mk/beforedir.mk
external_merge/mk/unix.mk
external_merge/mk/win32.mk
external_merge/src/dir.mk
external_merge/src/tool/dir.mk
mk/beforedir.mk
mk/unix.mk
mk/win32.mk
src/dir.mk
src/examples/boa/dir.mk
src/examples/echo/dir.mk
src/lib/omniORB2/dir.mk
src/lib/omniORB2/orbcore/sharedlib/dir.mk
src/tool/dir.mk
src/tool/omniidl2/OBSOLETE                      -- new
src/tool/win32/dir.mk
src/tool/win32/oidlwrapper.c                    -- new


Tue Feb 22 12:23:01 GMT 2000 dpg1
=================================

- Minor ORB core changes to support omniORBpy

include/omniORB3/omniInternal.h
include/omniORB3/omniObjRef.h
src/lib/omniORB2/orbcore/omniInternal.cc


Mon Feb 21 09:54:13 GMT 2000 djr
================================

- And a couple more.

src/lib/omniORB2/dynamic/typecode.cc


Fri Feb 18 16:09:17 GMT 2000 dpg1
=================================

- PYTHON make variable to tell the omniidl build process where python
  is

external_merge/mk/beforedir.mk
external_merge/mk/platforms/alpha_linux_2.0.mk
external_merge/mk/platforms/alpha_nt_4.0.mk
external_merge/mk/platforms/alpha_osf1_3.2.mk
external_merge/mk/platforms/alpha_osf1_4.0.mk
external_merge/mk/platforms/hppa_hpux_10.20.mk
external_merge/mk/platforms/hppa_hpux_11.00.mk
external_merge/mk/platforms/i586_linux_2.0.mk
external_merge/mk/platforms/i586_linux_2.0_glibc.mk
external_merge/mk/platforms/m68k_nextstep_3.3.mk
external_merge/mk/platforms/mips_irix_6.2_n32.mk
external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk
external_merge/mk/platforms/mips_sinux_5.43.mk
external_merge/mk/platforms/powerpc_aix_4.2.mk
external_merge/mk/platforms/powerpc_aix_4.2_egcs.mk
external_merge/mk/platforms/sun4_sosV_5.5.mk
external_merge/mk/platforms/sun4_sosV_5.6.mk
external_merge/mk/platforms/sun4_sosV_5.7.mk
external_merge/mk/platforms/x86_freebsd_3.2.mk
external_merge/mk/platforms/x86_nt_3.5.mk
external_merge/mk/platforms/x86_nt_4.0.mk
external_merge/mk/platforms/x86_osr5.mk
external_merge/mk/platforms/x86_sosV_5.5.mk
external_merge/mk/platforms/x86_win95.mk
mk/beforedir.mk
mk/platforms/i586_linux_2.0_glibc.mk
mk/platforms/sun4_sosV_5.5.mk
mk/platforms/sun4_sosV_5.7.mk
src/lib/omniORB2/omniidl_be/dir.mk
src/lib/omniORB2/omniidl_be/cxx/dir.mk
src/tool/omniidl/dir.mk
src/tool/omniidl/cxx/dir.mk
src/tool/omniidl/python/omniidl/dir.mk
src/tool/omniidl/python/omniidl_be/dir.mk


Thu Feb 17 14:38:09 GMT 2000 djr
================================

- A couple more fixes for TypeCode_union with alias in discriminator.

src/lib/omniORB2/dynamic/typecode.cc


Wed Feb 16 16:21:41 GMT 2000 dpg1
=================================

- Updates to help Python neophytes

src/lib/omniORB2/omniidl_be/cxx/dir.mk
src/tool/omniidl/cxx/idlpython.cc
src/tool/omniidl/python/omniidl/dir.mk
src/tool/omniidl/python/omniidl/main.py
src/tool/omniidl/python/omniidl_be/dir.mk
src/tool/omniidl/python/scripts/dir.mk
src/tool/omniidl/python/scripts/omniidl
src/tool/omniidl/python/scripts/omniidl.py  -- new


Tue Feb 15 13:50:03 GMT 2000 djr
================================

- Strip aliases from sequence elements when determining whether we can
  optimise inserion into / extraction from Anys.

src/tool/omniidl2/omniORB2_be/o2be_sequence.cc


Tue Feb 15 11:01:09 GMT 2000 djr
================================

- Fixed bug in TypeCodes -- create_union_tc failed if the discriminator
  type was an alias.

src/lib/omniORB2/dynamic/typecode.cc
src/lib/omniORB2/dynamic/typecode.h


Mon Feb 14 18:26:26 GMT 2000 dpg1
=================================

- New IDL compiler merged in from omniidl module. Not yet activated in
  dir.mk files

external_merge/src/lib/omniORB2/omniidl_be/GNUmakefile              -- new
external_merge/src/lib/omniORB2/omniidl_be/cxx/dynskel/GNUmakefile  -- new
external_merge/src/lib/omniORB2/omniidl_be/cxx/header/GNUmakefile   -- new
external_merge/src/lib/omniORB2/omniidl_be/cxx/skel/GNUmakefile     -- new
external_merge/src/tool/omniidl/GNUmakefile                         -- new
external_merge/src/tool/omniidl/cxx/GNUmakefile                     -- new
external_merge/src/tool/omniidl/cxx/cccp/GNUmakefile                -- new
external_merge/src/tool/omniidl/python/GNUmakefile                  -- new
external_merge/src/tool/omniidl/python/omniidl/GNUmakefile          -- new
external_merge/src/tool/omniidl/python/omniidl_be/GNUmakefile       -- new
external_merge/src/tool/omniidl/python/scripts/GNUmakefile          -- new
src/lib/omniORB2/omniidl_be/dir.mk                                  -- new
src/lib/omniORB2/omniidl_be/showast.py                              -- new
src/lib/omniORB2/omniidl_be/cxx/__init__.py                         -- new
src/lib/omniORB2/omniidl_be/cxx/dir.mk                              -- new
src/lib/omniORB2/omniidl_be/cxx/env.py                              -- new
src/lib/omniORB2/omniidl_be/cxx/name.py                             -- new
src/lib/omniORB2/omniidl_be/cxx/skutil.py                           -- new
src/lib/omniORB2/omniidl_be/cxx/tyutil.py                           -- new
src/lib/omniORB2/omniidl_be/cxx/util.py                             -- new
src/lib/omniORB2/omniidl_be/cxx/dynskel/__init__.py                 -- new
src/lib/omniORB2/omniidl_be/cxx/dynskel/bdesc.py                    -- new
src/lib/omniORB2/omniidl_be/cxx/dynskel/dir.mk                      -- new
src/lib/omniORB2/omniidl_be/cxx/dynskel/main.py                     -- new
src/lib/omniORB2/omniidl_be/cxx/dynskel/tcstring.py                 -- new
src/lib/omniORB2/omniidl_be/cxx/dynskel/typecode.py                 -- new
src/lib/omniORB2/omniidl_be/cxx/header/__init__.py                  -- new
src/lib/omniORB2/omniidl_be/cxx/header/defs.py                      -- new
src/lib/omniORB2/omniidl_be/cxx/header/dir.mk                       -- new
src/lib/omniORB2/omniidl_be/cxx/header/forward.py                   -- new
src/lib/omniORB2/omniidl_be/cxx/header/marshal.py                   -- new
src/lib/omniORB2/omniidl_be/cxx/header/opers.py                     -- new
src/lib/omniORB2/omniidl_be/cxx/header/poa.py                       -- new
src/lib/omniORB2/omniidl_be/cxx/header/tcstring.py                  -- new
src/lib/omniORB2/omniidl_be/cxx/header/tie.py                       -- new
src/lib/omniORB2/omniidl_be/cxx/impl/main.py                        -- new
src/lib/omniORB2/omniidl_be/cxx/skel/__init__.py                    -- new
src/lib/omniORB2/omniidl_be/cxx/skel/dir.mk                         -- new
src/lib/omniORB2/omniidl_be/cxx/skel/dispatch.py                    -- new
src/lib/omniORB2/omniidl_be/cxx/skel/main.py                        -- new
src/lib/omniORB2/omniidl_be/cxx/skel/mangler.py                     -- new
src/lib/omniORB2/omniidl_be/cxx/skel/poa.py                         -- new
src/lib/omniORB2/omniidl_be/cxx/skel/proxy.py                       -- new
src/lib/omniORB2/omniidl_be/cxx/tools/genIDL                        -- new
src/tool/omniidl/python/dir.mk                                      -- new
src/tool/omniidl/python/omniidl/dir.mk                              -- new
src/tool/omniidl/python/omniidl/main.py                             -- new
src/tool/omniidl/python/omniidl_be/dir.mk                           -- new
src/tool/omniidl/python/scripts/dir.mk                              -- new
src/tool/omniidl/python/scripts/omniidl                             -- new


Mon Feb 14 09:41:44 GMT 2000 djr
================================

- Fixed typo.

src/lib/omniORB2/dynamic/tcParser.cc


Thu Feb 10 18:26:33 GMT 2000 djr
================================

- The omni_tracedmutex/condition implementation now survives if
  omni_thread::self() returns zero (as has been reported on
  OpenVMS after main has exited).

src/lib/omniORB2/orbcore/tracedthread.cc


Thu Feb 10 17:58:14 GMT 2000 djr
================================

- Optimised tcParser::calculateItemSize to use TypeCode alignment info.
  tcParser::alignedSize now uses the size of the buffer for its
  calculation if the incoming alignment happens to be 8.

src/lib/omniORB2/dynamic/tcParser.cc
src/lib/omniORB2/dynamic/tcParser.h

- Renamed NetBufferedStream::Rd/WrMessageCurrentAlignment() to
  rd/wrCurrentAlignment() to match MemBufferedStream.

include/omniORB3/bufferedStream.h


Thu Feb 10 14:06:05 GMT 2000 djr
================================

- Minor bug in omniidl3 (missing scope).

src/tool/omniidl2/omniORB2_be/o2be_sequence.cc


Wed Feb  9 11:57:28 GMT 2000 djr
================================

- Fixed bug in _CORBA_String_member.  When a new string is allocated or
  consumed the pd_rel flag should be set to avoid a memory leak.

include/omniORB3/stringtypes.h
src/lib/omniORB2/orbcore/corbaString.cc

- Minor improvements to omni_tracedmutex/condition.  Now checks that mutex
  is destroyed before associated condvar.  Unnecassary member
  omni_tracedmutex::pd_m removed.

include/omniORB3/tracedthread.h
src/lib/omniORB2/orbcore/tracedthread.cc

- Fixed a bug in insertion to/extraction from Anys.  tcParser code now
  uses a flag to determine whether to free the string, and sets the flag
  if a new string is allocated (to ensure the String_member releases it
  properly).

- New optimisation for insert/extraction of sequences of simple types
  to/from Anys.

include/omniORB3/tcDescriptor.h
src/lib/omniORB2/dynamic/any.cc
src/lib/omniORB2/dynamic/tcParser.cc
src/tool/omniidl2/omniORB2_be/o2be_array.cc
src/tool/omniidl2/omniORB2_be/o2be_sequence.cc


Tue Feb  8 13:20:50 GMT 2000 djr
================================

- Added a few _core_attr.  Dynamic library should now work on Win(x).
  (modulo oustanding issue with tcParser and String_member).

include/omniORB3/omniInternal.h
src/lib/omniORB2/dynamicLib.h


Mon Feb  7 15:29:03 GMT 2000 dpg1
=================================

- Fixed silly bug in _is_equivalent() with pseudo object references.

src/lib/omniORB2/orbcore/corbaObject.cc


Fri Feb  4 18:07:05 GMT 2000 djr
================================

- Minor mods for IRIX, which doesn't like casting from pointers to
  ints.  This is because pointers are 8bytes and ints are 4.

- Removed _is_a, _is_equivalent and _hash from omniOrbORB, since
  they are implemented in CORBA::Object (and are not reachable
  anyway!).

src/lib/omniORB2/orbcore/corbaObject.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/corbaOrb.h
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poamanager.cc


Fri Feb  4 14:46:06 GMT 2000 djr
================================

- Updated a couple of feature test macros.

include/omniORB3/CORBA_sysdep.h


Tue Feb  1 19:15:12 GMT 2000 djr
================================

- Removed debugging output (left in by mistake).

src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Mon Jan 31 11:10:10 GMT 2000 djr
================================

- Fixed bug in unmarshalling of strings, which would cause a static
  string object to be free()d.

src/lib/omniORB2/orbcore/corbaString.cc


Fri Jan 28 15:43:09 GMT 2000 djr
================================

- Removed superflouous reference counting in Strand_iterator.

- Removed flags to indicate whether Ropes and Strands are heap-
  allocated.  They always are!

- Improved allocation of client requests to strands.  Previously if
  too many threads needed strands from the same rope, the allocation
  was performed poorly (late threads all being allocated to the first
  strand).  Now strands are allocated as the become available.

include/omniORB3/rope.h
src/lib/omniORB2/orbcore/relStream.cc
src/lib/omniORB2/orbcore/relStream.h
src/lib/omniORB2/orbcore/strand.cc
src/lib/omniORB2/orbcore/tcpSocket.h
src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc


Thu Jan 27 18:06:52 GMT 2000 djr
================================

- Fixed bug in dumpbuf() (doh!).

src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc


Thu Jan 27 16:27:08 GMT 2000 djr
================================

- Fixed bug in String_member.  It is now initialised with an
  empty string by default (rather than null).  This reflects
  a change in the mapping.

include/omniORB3/stringtypes.h
include/omniORB3/omniInternal.h
src/lib/omniORB2/orbcore/omniInternal.cc


Thu Jan 27 10:45:38 GMT 2000 djr
================================

- Updated the anyExample.

src/examples/anyExample/anyExample_clt.cc
src/examples/anyExample/anyExample_impl.cc
src/examples/anyExample/dir.mk

- Added macro OMNIORB_BASE_CTOR() which conditionally provides the
  fully qualified name for a base class constructor.  This is enabled
  with the feature test macro OMNI_REQUIRES_FQ_BASE_CTOR.
   This seems to be required for powerpc_aix at least.

- Other minor mods for powerpc aix.

external_merge/mk/platforms/powerpc_aix_4.2.mk
include/omniORB3/CORBA_sysdep.h
include/omniORB3/userexception.h
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poamanager.cc
src/lib/omniORB2/orbcore/poastubs.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc

- Minor mod to example.

src/examples/echo/eg2_clt.cc


Wed Jan 26 15:29:24 GMT 2000 djr
================================

- Fixed a couple of typos.

src/lib/omniORB2/orbcore/sharedlib/dir.mk


Sat Jan 22 16:04:14 GMT 2000 djr
================================

- Added -ORBtraceInvocations to the -ORBhelp summary.

src/lib/omniORB2/orbcore/corbaOrb.cc


Thu Jan 20 11:42:59 GMT 2000 djr
================================

- Pseudo objects should now use omni::poRcLock for reference counting.
  It is never destroyed, and so should prevent any problems when
  _var types are destroyed at static de-initialisation.

  NB. Not all yet do!  Eg. TypeCode, DynAny etc.

- New assertion type OMNI_USER_CHECK that detects errors that are likely
  to be caused by the application (eg. release a reference too many times).
  It throws up a standard message and points to a comment in the source.

- Fixed deadlock bug for CORBA::ORB.  The <orb_lock> mutex is held when
  it is destroyed, but a CORBA::ORB_ptr could be released during this
  process.  Ref counting is now done with a different mutex.

include/omniORB3/omniInternal.h
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/corbaOrb.h
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poamanager.cc
src/lib/omniORB2/orbcore/policy.cc


Fri Jan  7 16:19:24 GMT 2000 djr
================================

- (dme) provide Foo_copy() for array types per CORBA 2.3
- (dme) make o2be_root.cc compile on non-gcc platforms

src/tool/omniidl2/omniORB2_be/o2be.h
src/tool/omniidl2/omniORB2_be/o2be_array.cc
src/tool/omniidl2/omniORB2_be/o2be_root.cc


Fri Jan  7 14:47:08 GMT 2000 djr
================================

- Server and client call timeouts are now disabled by default.

src/lib/omniORB2/orbcore/scavenger.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
doc/tex/omniORB2.tex


Wed Jan  5 17:54:30 GMT 2000 djr
================================

- Added check for re-initialisation of the ORB.  Now prints out a message
  and throws BAD_INV_ORDER (rather than failing an assertion).

src/lib/omniORB2/orbcore/corbaOrb.cc


Mon Jan  3 18:42:05 GMT 2000 djr
================================

- Fixed bug in ref counting for POA Policy objects.

src/lib/omniORB2/orbcore/policy.cc


Fri Dec 17 17:58:57 GMT 1999 dpg1
=================================

- Fix to name lookup in inherited interfaces

src/tool/omniidl2/util/utl_scope.cc


Fri Dec 17 13:27:16 GMT 1999 djr
================================

- Applied jnw's performance improvement for Any.


Thu Dec 16 14:20:49 GMT 1999 djr
================================

- Fixed pseudo-bug in omniidl3.  Did not have any negative effects, but
  was unsafe and the method o2be_operation::id_sorted_exn_list() did not
  do what it said!

src/tool/omniidl2/omniORB2_be/o2be_operation.cc


Wed Dec 15 14:47:18 GMT 1999 djr
================================

- Fixed bug in omniidl3 - scoping incorrect for attribute write arg.

src/tool/omniidl2/omniORB2_be/o2be_attribute.cc


Fri Dec 10 12:31:04 GMT 1999 djr
================================

- Fixed deadlock in bootstrap agent.

src/lib/omniORB2/orbcore/bootstrap_i.cc


Tue Dec  7 18:08:27 GMT 1999 djr
================================

- Fixed bug in omniidl2, involving typedef of sequence of objref
  in the objrefs definition.

src/tool/omniidl2/omniORB2_be/o2be_sequence.cc


Mon Dec  6 13:59:32 GMT 1999 djr
================================

- Fixed bug in dumpbuf().

src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc


Thu Dec  2 19:01:41 GMT 1999 djr
================================

- Fixed bug in marshalling/unmarshalling of arrays.

src/tool/omniidl2/omniORB2_be/o2be_operation.cc


Thu Nov 25 11:30:35 GMT 1999 djr
================================

- CORBA::Policy::destroy() no longer throws an exception.

src/lib/omniORB2/orbcore/policy.cc


Tue Nov 23 10:45:38 GMT 1999 djr
================================

- Added _var_type and _ptr_type to POA.

include/omniORB3/poa.h


Mon Nov 22 10:48:48 GMT 1999 djr
================================

- Fixed bug in omniidl3.  typedef of Object generated incorrect code.

src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Fri Nov 12 17:02:06 GMT 1999 djr
================================

- Minor mods for aCC on hp-10.20.

src/lib/omniORB2/orbcore/poa.cc

- Added make files for callback example.

external_merge/src/examples/call_back/GNUmakefile  -- new
external_merge/src/examples/call_back/dir.mak      -- new


Mon Nov  8 09:42:40 GMT 1999 djr
================================

- Fixed bug in omniObjRef::_real_is_a().  Did not always contact remote
  object in the case that it was not able to say 'yes' using local
  information.

src/lib/omniORB2/orbcore/omniObjRef.cc


Tue Nov  2 17:38:16 GMT 1999 djr
================================

- Removed obsolete references to rope factories.

src/lib/omniORB2/orbcore/corbaOrb.cc


Fri Oct 29 11:26:38 BST 1999 djr
================================

- Removed reference to omni::internalLock in destructor of POA objects.
  This caused the core library to seg-fault on shutdown if ORB_init()
  was never called.

src/lib/omniORB2/orbcore/poa.cc

- Ensured that all nil objects are dynamically allocated and never
  destroyed.  omni::nilRefLock is now accessed by a method to ensure
  that it is properly initialised, even when accessed from static
  initialisation code.

- Added prefix 'omni' to a number of 'nil' object classes.

include/omniORB3/omniInternal.h
src/lib/omniORB2/dynamic/context.cc
src/lib/omniORB2/dynamic/contextList.cc
src/lib/omniORB2/dynamic/dynAnyNil.cc
src/lib/omniORB2/dynamic/environment.cc
src/lib/omniORB2/dynamic/exceptionList.cc
src/lib/omniORB2/dynamic/namedValue.cc
src/lib/omniORB2/dynamic/nvList.cc
src/lib/omniORB2/dynamic/request.cc
src/lib/omniORB2/dynamic/typecode.cc
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaObject.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poamanager.cc
src/lib/omniORB2/orbcore/poastubs.cc
src/lib/omniORB2/orbcore/policy.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Wed Oct 27 19:06:02 BST 1999 sll
================================

- Fixed a bug which triggers an assertion failure when the ORB cannot spawn
  a thread to serve a new connection.

src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc


Wed Oct 27 18:08:28 BST 1999 djr
================================

- omni::internalLock and objref_rc_lock are now pointers.  This ensures
  that they are not cleaned up at program termination.  Previously the
  mutexes could be cleaned up before they were finished with, as they
  may be used as a result of static object destructors.

include/omniORB3/omniInternal.h
include/omniORB3/omniObjRef.h
include/omniORB3/omniServant.h
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/giopServer.cc
src/lib/omniORB2/orbcore/localIdentity.cc
src/lib/omniORB2/orbcore/localIdentity.h
src/lib/omniORB2/orbcore/objectAdapter.cc
src/lib/omniORB2/orbcore/objectAdapter.h
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/omniObjRef.cc
src/lib/omniORB2/orbcore/omniServant.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/lib/omniORB2/orbcore/remoteIdentity.cc


Wed Oct 27 16:10:16 BST 1999 djr
================================

- Changed reference to omniDynamic2 to omniDynamic3.

external_merge/mk/platforms/mips_irix_6.4_6.5_common.mk


Tue Oct 26 20:34:57 BST 1999 sll
================================

- DynAny no longer do alias expand on the typecode. In other words, all
  aliases are preserved in the typecode.

src/lib/omniORB2/dynamic/dynAny.h
src/lib/omniORB2/dynamic/dynAny.cc
src/lib/omniORB2/dynamic/typecode.cc


Thu Oct 21 12:00:31 BST 1999 djr
================================

- Added export rule.

src/examples/boa/dir.mk
src/examples/poa/implicit_activation/dir.mk

- Added _core_attr to declaration of _PD_repoId in interfaces
  and exceptions.  This fixes a bug seen on MSVC.

include/omniORB3/CORBA.h
include/omniORB3/poa.h
include/omniORB3/poa_defs.h
include/omniORB3/userexception.h
src/tool/omniidl2/omniORB2_be/o2be_interface.cc
src/tool/omniidl2/omniORB2_be/o2be_exception.cc


Mon Oct 18 18:24:41 BST 1999 djr
================================

- Work-around for MSVC scoping bug in omniidl3.

src/tool/omniidl2/omniORB2_be/o2be_interface.cc

- Fixes for MSVC dll building.

include/omniORB3/CORBA.h
include/omniORB3/poa.h
include/omniORB3/userexception.h


Mon Oct 18 12:00:56 BST 1999 djr
================================

- New macro OMNIORB_FOR_EACH_SYS_EXCEPTION, which allows another macro
  to be expanded for each system exception.  This centralises the list
  of system exceptions.

include/omniORB3/userexception.h
include/omniORB3/CORBA.h
src/lib/omniORB2/exception.h
src/lib/omniORB2/orbcore/exceptn.cc
src/lib/omniORB2/orbcore/giopClient.cc
src/lib/omniORB2/orbcore/giopServer.cc
src/lib/omniORB2/dynamic/dynException.cc


Sat Oct 16 14:18:56 BST 1999 djr
================================

- Various changes for MSVC.

include/omniORB3/CORBA.h
include/omniORB3/poa.h
include/omniORB3/poa_defs.h
src/lib/omniORB2/orbcore/anonObject.h
src/lib/omniORB2/orbcore/corbaObject.cc
src/lib/omniORB2/orbcore/gatekeeper.h
src/lib/omniORB2/orbcore/initFile.cc
src/lib/omniORB2/orbcore/poastubs.cc
src/lib/omniORB2/orbcore/policy.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/lib/omniORB2/orbcore/tcpSocket.cc
src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc
src/lib/omniORB2/orbcore/sharedlib/dir.mk
src/lib/omniORB2/orbcore/sharedlib/msvcdllstub.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Thu Oct 14 16:59:11 BST 1999 djr
================================

- Added log messages whenever system exceptions are throw, giving
  source file and line number.  Enabled at trace level 10.  This
  can be disabled by defining the pre-processor symbol:
    OMNIORB_NO_EXCEPTION_LOGGING

src/lib/omniORB2/exception.h
src/lib/omniORB2/orbcore/callDescriptor.cc
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaObject.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/corbaString.cc
src/lib/omniORB2/orbcore/dynamicLib.cc
src/lib/omniORB2/orbcore/exception.cc
src/lib/omniORB2/orbcore/exceptn.cc
src/lib/omniORB2/orbcore/giopClient.cc
src/lib/omniORB2/orbcore/giopServer.cc
src/lib/omniORB2/orbcore/initFile.cc
src/lib/omniORB2/orbcore/ior.cc
src/lib/omniORB2/orbcore/localIdentity.cc
src/lib/omniORB2/orbcore/mbufferedStream.cc
src/lib/omniORB2/orbcore/nbufferedStream.cc
src/lib/omniORB2/orbcore/objectAdapter.cc
src/lib/omniORB2/orbcore/omniInternal.cc
src/lib/omniORB2/orbcore/omniORB.cc
src/lib/omniORB2/orbcore/omniObjRef.cc
src/lib/omniORB2/orbcore/omniServant.cc
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poamanager.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/lib/omniORB2/orbcore/relStream.cc
src/lib/omniORB2/orbcore/remoteIdentity.cc
src/lib/omniORB2/orbcore/strand.cc
src/lib/omniORB2/orbcore/tcpSocket.cc
src/lib/omniORB2/orbcore/tcpSocketMTfactory.cc

src/lib/omniORB2/dynamic/any.cc
src/lib/omniORB2/dynamic/anyP.cc
src/lib/omniORB2/dynamic/context.cc
src/lib/omniORB2/dynamic/contextList.cc
src/lib/omniORB2/dynamic/dynAny.cc
src/lib/omniORB2/dynamic/dynAnyNil.cc
src/lib/omniORB2/dynamic/dynException.cc
src/lib/omniORB2/dynamic/dynamicImplementation.cc
src/lib/omniORB2/dynamic/environment.cc
src/lib/omniORB2/dynamic/exceptionList.cc
src/lib/omniORB2/dynamic/ir.cc
src/lib/omniORB2/dynamic/namedValue.cc
src/lib/omniORB2/dynamic/nvList.cc
src/lib/omniORB2/dynamic/request.cc
src/lib/omniORB2/dynamic/serverRequest.cc
src/lib/omniORB2/dynamic/tcParser.cc
src/lib/omniORB2/dynamic/typecode.cc
src/lib/omniORB2/dynamic/typecode.h


Wed Oct 13 16:40:34 BST 1999 djr
================================

- Fixed bug in omniidl3.  Typedef of objref as member of exception
  caused seg fault.

src/tool/omniidl3/omniORB2_be/o2be_exception.cc


Wed Oct 13 16:11:27 BST 1999 sll
================================

- Added #include <unistd.h> for AIX


Wed Oct 13 16:11:27 BST 1999 djr
================================

src/lib/omnithread/posix.cc

- Fixed omniidl3 bugs:

   Fixed mapping for server-skeleton signatures.  inout parameters
   should not use _INOUT_arg types.

   Call descriptors for operations and attributes used different naming
   conventions for members, and had different constructors, but can be
   used interchangeably (so need to export identical interfaces).

src/too/omniidl2/omniORB2_be/o2be.h
src/too/omniidl2/omniORB2_be/o2be_attribute.cc
src/too/omniidl2/omniORB2_be/o2be_interface.cc
src/too/omniidl2/omniORB2_be/o2be_operation.cc


Wed Oct 13 13:38:21 BST 1999 djr
================================

- Don't use virtual inheritance in examples (not needed).

src/examples/echo/eg1.cc
src/examples/echo/eg2_impl.cc
src/examples/echo/eg3_impl.cc
src/examples/poa/implicit_activation/eg1.cc

- Fixed repository id returned by CORBA::Exception::_NP_repoId().
  It did not include the version number of system exceptions.

src/lib/omniORB2/orbcore/exceptn.cc

- Out-of-date name for tcDescriptor for CORBA::Object.

include/omniORB3/tcDescriptor.h

- Added typedef for TypeCode_out.

include/omniORB3/CORBA_vartypes.h


Mon Oct  4 18:05:57 BST 1999 djr
================================

- A whole bunch on minor MSVC work-arounds.

include/omniORB3/userexception.h
src/lib/omniORB2/orbcore/anonObject.h
src/lib/omniORB2/orbcore/bootstrap_i.cc
src/lib/omniORB2/orbcore/callDescriptor.cc
src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaOrb.cc
src/lib/omniORB2/orbcore/poaimpl.h
src/lib/omniORB2/orbcore/poamanager.h
src/lib/omniORB2/orbcore/poastubs.cc
src/lib/omniORB2/orbcore/portableserver.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc


Mon Oct  4 16:39:10 BST 1999 djr
================================

- Constructor for _objref_foo calls Object rather than CORBA::Object to
  avoid scoping problem with MSVC.

include/omniORB3/poa_defs.hh
src/tool/omniidl2/omniORB2_be/o2be_interface.cc

- Workaround for MSVC bug (inserting StringBuf into stream).

src/tool/omniidl2/omniORB2_be/o2be_util.cc

- Re-organised macros to avoid dodgy missing parameter.

include/omniORB3/userexception.h


Thu Sep 30 12:43:39 BST 1999 djr
================================

- New MACRO HAS_Cplusplus_catch_exception_by_base.

- Implemented catching user-defined exceptions in stubs for
  compilers which have no support for catching exceptions by
  base class.

include/omniORB3/CORBA_sysdep.h
include/omniORB3/giopDriver.h
include/omniORB3/omniORB.h
src/lib/omniORB3/giopServer.cc
src/tool/omniidl2/omniORB2_be/o2be_operation.cc

- Implemented use of PortableServer::AdapterActivators in POAs.

src/lib/omniORB2/poa.cc
src/lib/omniORB2/poaimpl.h
src/lib/omniORB2/poamanager.cc
src/lib/omniORB2/poamanager.h

- Implemented '_interface' for BOA servants.

src/lib/omniORB2/orbcore/corbaBoa.cc


Thu Sep 30 09:58:02 BST 1999 djr
================================

- Fixed bug in omniNames.  Did not call _remove_ref() on implementation
  objects after activating them -- so they were not cleaned up.

src/appl/omniNames/log.cc
src/appl/omniNames/NamingContext_i.cc


Wed Sep 29 14:08:03 BST 1999 djr
================================

- Updated mapping of operation signatures for skeletons to use
  T_out types for out arguments.  The old signatures can be used
  by specifying the -Bold_signatures flag.

- Renamed all flags to omniidl3 relating to backwards-compatiblity
    -c -> -Bold_reserved_prefix
    -b -> -Bboa

src/tool/omniidl2/include/idl_defines.hh
src/tool/omniidl2/omniORB2_be/o2be_cfe_interface.cc
src/tool/omniidl2/omniORB2_be/o2be_interface.cc

- Updated omniNames to use the new mapping.

src/appl/omniNames/BindingIterator_i.h
src/appl/omniNames/NamingContext_i.h
src/appl/omniNames/NamingContext_i.cc


Tue Sep 28 11:39:14 BST 1999 djr
================================

- Removed pretty-printing of object keys from object adapters.

src/lib/omniORB2/orbcore/corbaBoa.cc
src/lib/omniORB2/orbcore/corbaBoa.h
src/lib/omniORB2/orbcore/logIOstream.cc
src/lib/omniORB2/orbcore/objectAdapter.h
src/lib/omniORB2/orbcore/poa.cc
src/lib/omniORB2/orbcore/poaimpl.h
src/lib/omniORB2/orbcore/remoteIdentity.cc


Tue Sep 28 10:33:30 BST 1999 djr
================================

- Corrected declaration of ObjectId_to_string and string_to_ObjectId.

include/omniORB3/poa.h

- Properly escape characters in include file guards.
  Removed dangerous default argument to StringBuf constructor.

src/tool/omniidl2/omniORB2_be/o2be_root.cc

- Check for zero length 'operation' string when unmarshalling GIOP
  Request header.  Fixed bug -- 'principal' field need not be zero
  terminated.

src/lib/omniORB2/orbcore/giopServer.cc

